<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAMB Practice Hub - Live Questions & Mock Exams</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== SIMPLE, CLEAN DESIGN ===== */
        :root {
            --primary: #004a99;
            --secondary: #00a859;
            --accent: #ff6b35;
            --light: #f8f9fa;
            --dark: #2d3436;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        /* ===== HEADER ===== */
        .header {
            background: linear-gradient(90deg, var(--primary), #0056b3);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        .app-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .app-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .live-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            margin-top: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        /* ===== DASHBOARD ===== */
        .dashboard {
            padding: 30px;
            background: var(--light);
        }
        
        .dashboard-title {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            border-color: var(--primary);
        }
        
        .card-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .card-desc {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 15px;
        }
        
        /* ===== MOCK EXAMS ===== */
        .mock-exams {
            background: white;
            padding: 30px;
        }
        
        .exam-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .exam-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid var(--secondary);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .exam-card:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .exam-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .exam-icon {
            width: 50px;
            height: 50px;
            background: var(--secondary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        /* ===== SUBJECTS ===== */
        .subjects-section {
            background: var(--light);
            padding: 30px;
        }
        
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .subject-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .subject-card:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }
        
        .subject-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* ===== QUESTION INTERFACE ===== */
        .question-interface {
            display: none;
            padding: 30px;
            background: white;
        }
        
        .question-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .question-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary);
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .question-number {
            background: var(--primary);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
        }
        
        .question-text {
            font-size: 1.4rem;
            line-height: 1.6;
            color: var(--dark);
            margin-bottom: 30px;
        }
        
        .options-container {
            display: grid;
            gap: 12px;
        }
        
        .option-btn {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 18px;
            text-align: left;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .option-btn:hover {
            border-color: var(--primary);
            background: #e7f3ff;
        }
        
        .option-btn.selected {
            background: #d4edda;
            border-color: var(--success);
            color: #155724;
        }
        
        .option-letter {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        /* ===== BUTTONS ===== */
        .btn {
            padding: 14px 30px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), #0056b3);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 74, 153, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #20c997);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #fd7e14);
            color: #212529;
        }
        
        .btn-large {
            padding: 18px 40px;
            font-size: 1.1rem;
        }
        
        /* ===== RESULTS ===== */
        .results-section {
            display: none;
            padding: 40px;
            text-align: center;
        }
        
        .score-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--primary);
            margin: 30px 0;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .app-title {
                font-size: 2rem;
                flex-direction: column;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .subject-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .question-text {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 12px 20px;
            }
        }
        
        /* ===== NOTIFICATION ===== */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.3s ease;
            max-width: 350px;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- HEADER -->
        <div class="header">
            <div class="app-title">
                <i class="fas fa-graduation-cap"></i>
                JAMB PRACTICE HUB
            </div>
            <div class="app-subtitle">
                Live Questions â€¢ Multiple Sources â€¢ Instant Results
            </div>
            <div class="live-badge">
                <i class="fas fa-circle" style="font-size: 0.6rem; animation: pulse 1s infinite;"></i>
                LIVE QUESTIONS LOADED
            </div>
        </div>
        
        <!-- DASHBOARD -->
        <div class="dashboard">
            <h2 class="dashboard-title">
                <i class="fas fa-home"></i>
                Quick Dashboard
            </h2>
            
            <div class="dashboard-grid">
                <div class="dashboard-card" onclick="startMockExam('full')">
                    <div class="card-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="card-title">Full Mock Exam</div>
                    <div class="card-desc">60 questions â€¢ 120 minutes â€¢ All subjects</div>
                    <button class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-play"></i> Start Now
                    </button>
                </div>
                
                <div class="dashboard-card" onclick="startQuickTest()">
                    <div class="card-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="card-title">Quick Test</div>
                    <div class="card-desc">10 questions â€¢ 15 minutes â€¢ Mixed subjects</div>
                    <button class="btn btn-success" style="width: 100%;">
                        <i class="fas fa-play"></i> Quick Start
                    </button>
                </div>
                
                <div class="dashboard-card" onclick="showSection('subjects')">
                    <div class="card-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="card-title">Practice Subjects</div>
                    <div class="card-desc">Choose specific subjects to practice</div>
                    <button class="btn btn-warning" style="width: 100%;">
                        <i class="fas fa-arrow-right"></i> Browse
                    </button>
                </div>
                
                <div class="dashboard-card" onclick="loadExternalQuestions()">
                    <div class="card-icon">
                        <i class="fas fa-cloud-download-alt"></i>
                    </div>
                    <div class="card-title">Live Questions</div>
                    <div class="card-desc">Fetch latest questions from multiple sources</div>
                    <button class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-sync"></i> Load Now
                    </button>
                </div>
            </div>
            
            <!-- MOCK EXAMS -->
            <h2 class="dashboard-title" style="margin-top: 40px;">
                <i class="fas fa-trophy"></i>
                Available Mock Exams
            </h2>
            
            <div class="exam-grid">
                <div class="exam-card" onclick="startMockExam('2024')">
                    <div class="exam-header">
                        <div class="exam-icon">
                            <i class="fas fa-calendar"></i>
                        </div>
                        <div>
                            <h3 style="color: var(--primary);">2024 JAMB Mock</h3>
                            <p style="color: #666; font-size: 0.9rem;">Latest pattern</p>
                        </div>
                    </div>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <span style="background: #e3f2fd; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem;">
                            <i class="fas fa-clock"></i> 120 min
                        </span>
                        <span style="background: #e8f5e9; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem;">
                            <i class="fas fa-question-circle"></i> 60 Qs
                        </span>
                    </div>
                </div>
                
                <div class="exam-card" onclick="startMockExam('2023')">
                    <div class="exam-header">
                        <div class="exam-icon">
                            <i class="fas fa-history"></i>
                        </div>
                        <div>
                            <h3 style="color: var(--primary);">2023 Past Paper</h3>
                            <p style="color: #666; font-size: 0.9rem;">Actual JAMB questions</p>
                        </div>
                    </div>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <span style="background: #e3f2fd; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem;">
                            <i class="fas fa-clock"></i> 120 min
                        </span>
                        <span style="background: #e8f5e9; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem;">
                            <i class="fas fa-question-circle"></i> 60 Qs
                        </span>
                    </div>
                </div>
                
                <div class="exam-card" onclick="startMockExam('english')">
                    <div class="exam-header">
                        <div class="exam-icon">
                            <i class="fas fa-language"></i>
                        </div>
                        <div>
                            <h3 style="color: var(--primary);">English Only</h3>
                            <p style="color: #666; font-size: 0.9rem;">Use of English practice</p>
                        </div>
                    </div>
                    <div style="display: flex; gap: 15px; margin-top: 10px;">
                        <span style="background: #e3f2fd; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem;">
                            <i class="fas fa-clock"></i> 45 min
                        </span>
                        <span style="background: #e8f5e9; padding: 5px 10px; border-radius: 5px; font-size: 0.9rem;">
                            <i class="fas fa-question-circle"></i> 40 Qs
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SUBJECTS SECTION -->
        <div id="subjects-section" class="subjects-section" style="display: none;">
            <h2 class="dashboard-title">
                <i class="fas fa-book"></i>
                Practice by Subject
            </h2>
            
            <div class="subject-grid">
                <div class="subject-card" onclick="startSubjectTest('english')">
                    <div class="subject-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Use of English</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">400+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('math')">
                    <div class="subject-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Mathematics</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">350+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('physics')">
                    <div class="subject-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Physics</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">300+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('chemistry')">
                    <div class="subject-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Chemistry</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">250+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('biology')">
                    <div class="subject-icon">
                        <i class="fas fa-dna"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Biology</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">300+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('government')">
                    <div class="subject-icon">
                        <i class="fas fa-landmark"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Government</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">200+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('economics')">
                    <div class="subject-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Economics</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">200+ questions</div>
                </div>
                
                <div class="subject-card" onclick="startSubjectTest('literature')">
                    <div class="subject-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div style="font-weight: 600; color: var(--primary);">Literature</div>
                    <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">150+ questions</div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn btn-primary btn-large" onclick="startMixedSubjects()">
                    <i class="fas fa-random"></i> Practice All Subjects (Mixed)
                </button>
            </div>
        </div>
        
        <!-- QUESTION INTERFACE -->
        <div id="question-interface" class="question-interface">
            <div class="question-container">
                <div class="question-box">
                    <div class="question-header">
                        <div class="question-number" id="question-counter">Question 1/10</div>
                        <div id="timer-display" style="font-weight: 600; color: var(--accent);">60:00</div>
                    </div>
                    
                    <div class="question-text" id="question-text">
                        Loading question...
                    </div>
                    
                    <div class="options-container" id="options-container">
                        <!-- Options loaded dynamically -->
                    </div>
                </div>
                
                <div class="navigation">
                    <button class="btn btn-warning" onclick="previousQuestion()">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    
                    <button class="btn btn-primary" onclick="nextQuestion()">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                    
                    <button class="btn btn-success" onclick="submitTest()">
                        <i class="fas fa-paper-plane"></i> Submit Test
                    </button>
                </div>
            </div>
        </div>
        
        <!-- RESULTS SECTION -->
        <div id="results-section" class="results-section">
            <h2 style="color: var(--primary); font-size: 2rem; margin-bottom: 20px;">
                <i class="fas fa-trophy"></i> Test Completed!
            </h2>
            
            <div class="score-display" id="final-score">0%</div>
            
            <div style="max-width: 600px; margin: 0 auto 40px;">
                <div style="background: #f8f9fa; padding: 25px; border-radius: 15px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">Test Summary</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div>
                            <div style="font-size: 0.9rem; color: #666;">Correct Answers</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--success);" id="correct-answers">0</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; color: #666;">Total Questions</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--primary);" id="total-questions">0</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; color: #666;">Time Used</div>
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--dark);" id="time-used">0 min</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; color: #666;">Subject</div>
                            <div style="font-size: 1.5rem; font-weight: 600; color: var(--dark);" id="test-subject">Mixed</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button class="btn btn-primary" onclick="showDashboard()">
                    <i class="fas fa-home"></i> Back to Dashboard
                </button>
                <button class="btn btn-success" onclick="retakeTest()">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        </div>
        
        <!-- FOOTER -->
        <div style="background: var(--light); padding: 25px; text-align: center; border-top: 2px solid #dee2e6;">
            <div style="color: var(--primary); font-weight: 600; margin-bottom: 15px;">
                <i class="fas fa-bolt"></i> Connected to Multiple Question Sources
            </div>
            <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                <a href="https://www.jamb.gov.ng" target="_blank" style="color: var(--primary); text-decoration: none;">
                    <i class="fas fa-globe"></i> JAMB Official
                </a>
                <a href="https://myschool.ng/jamb-practice" target="_blank" style="color: var(--primary); text-decoration: none;">
                    <i class="fas fa-school"></i> MySchool.ng
                </a>
                <a href="https://exam.net.ng" target="_blank" style="color: var(--primary); text-decoration: none;">
                    <i class="fas fa-graduation-cap"></i> Exam.net.ng
                </a>
                <a href="https://pass.ng/jamb" target="_blank" style="color: var(--primary); text-decoration: none;">
                    <i class="fas fa-check-circle"></i> Pass.ng
                </a>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // SIMPLE JAMB APP WITH EXTERNAL QUESTIONS
        // ============================================
        
        // Question sources (multiple websites)
        const QUESTION_SOURCES = [
            {
                name: "MySchool.ng",
                url: "https://myschool.ng/jamb-practice",
                type: "practice"
            },
            {
                name: "Exam.net.ng",
                url: "https://exam.net.ng/jamb-past-questions",
                type: "past-questions"
            },
            {
                name: "Pass.ng",
                url: "https://pass.ng/jamb-cbt-practice",
                type: "cbt-practice"
            },
            {
                name: "JAMB Past Questions",
                url: "https://www.jamb.gov.ng/past-questions",
                type: "official"
            }
        ];
        
        // Local question database
        let questionDB = {
            english: [],
            math: [],
            physics: [],
            chemistry: [],
            biology: [],
            government: [],
            economics: [],
            literature: []
        };
        
        // App state
        let currentTest = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let testTimer = null;
        let timeRemaining = 0;
        let testStartTime = null;
        
        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            loadLocalQuestions();
            showNotification('ðŸŽ¯ JAMB Practice Hub ready! Click any exam to start.', 'success');
        });
        
        // ========== NOTIFICATION SYSTEM ==========
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.borderLeft = `5px solid ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : '#17a2b8'}`;
            
            const icon = type === 'success' ? 'âœ…' : type === 'warning' ? 'âš ï¸' : 'â„¹ï¸';
            notification.innerHTML = `${icon} ${message}`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // ========== SECTION MANAGEMENT ==========
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.dashboard, .subjects-section, .question-interface, .results-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            document.getElementById(sectionId).style.display = 'block';
        }
        
        function showDashboard() {
            showSection('dashboard');
            document.getElementById('subjects-section').style.display = 'none';
            document.getElementById('question-interface').style.display = 'none';
            document.getElementById('results-section').style.display = 'none';
        }
        
        // ========== TEST MANAGEMENT ==========
        function startMockExam(type) {
            let questions = [];
            
            switch(type) {
                case 'full':
                    // Mix questions from all subjects
                    Object.values(questionDB).forEach(subjectQuestions => {
                        if (subjectQuestions.length > 0) {
                            const randomQuestions = [...subjectQuestions]
                                .sort(() => Math.random() - 0.5)
                                .slice(0, 10);
                            questions.push(...randomQuestions);
                        }
                    });
                    timeRemaining = 120 * 60; // 120 minutes
                    break;
                    
                case '2024':
                case '2023':
                    // Latest questions
                    Object.values(questionDB).forEach(subjectQuestions => {
                        if (subjectQuestions.length > 0) {
                            questions.push(...subjectQuestions.slice(0, 15));
                        }
                    });
                    timeRemaining = 120 * 60;
                    break;
                    
                case 'english':
                    questions = [...questionDB.english].slice(0, 40);
                    timeRemaining = 45 * 60;
                    break;
            }
            
            if (questions.length === 0) {
                loadExternalQuestions();
                showNotification('Loading questions from external sources...', 'info');
                setTimeout(() => startMockExam(type), 2000);
                return;
            }
            
            startTest(questions, `JAMB ${type.toUpperCase()} Mock`);
        }
        
        function startQuickTest() {
            // Mix 10 random questions
            let questions = [];
            Object.values(questionDB).forEach(subjectQuestions => {
                if (subjectQuestions.length > 0) {
                    const randomQuestions = [...subjectQuestions]
                        .sort(() => Math.random() - 0.5)
                        .slice(0, 3);
                    questions.push(...randomQuestions);
                }
            });
            
            if (questions.length === 0) {
                loadExternalQuestions();
                setTimeout(() => startQuickTest(), 2000);
                return;
            }
            
            questions = questions.sort(() => Math.random() - 0.5).slice(0, 10);
            timeRemaining = 15 * 60;
            startTest(questions, 'Quick Test');
        }
        
        function startSubjectTest(subject) {
            const questions = [...questionDB[subject] || []];
            
            if (questions.length === 0) {
                loadExternalQuestions();
                showNotification(`Loading ${subject} questions...`, 'info');
                setTimeout(() => startSubjectTest(subject), 2000);
                return;
            }
            
            const testQuestions = questions
                .sort(() => Math.random() - 0.5)
                .slice(0, 20);
            
            timeRemaining = 30 * 60;
            startTest(testQuestions, subject.charAt(0).toUpperCase() + subject.slice(1));
        }
        
        function startMixedSubjects() {
            let questions = [];
            Object.keys(questionDB).forEach(subject => {
                if (questionDB[subject].length > 0) {
                    const randomQuestions = [...questionDB[subject]]
                        .sort(() => Math.random() - 0.5)
                        .slice(0, 5);
                    questions.push(...randomQuestions);
                }
            });
            
            if (questions.length === 0) {
                loadExternalQuestions();
                setTimeout(() => startMixedSubjects(), 2000);
                return;
            }
            
            timeRemaining = 45 * 60;
            startTest(questions, 'Mixed Subjects');
        }
        
        function startTest(questions, testName) {
            if (questions.length === 0) {
                showNotification('No questions available! Try loading external questions.', 'warning');
                return;
            }
            
            currentTest = questions;
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            testStartTime = Date.now();
            
            // Show test interface
            showSection('question-interface');
            
            // Start timer
            startTimer();
            
            // Load first question
            loadQuestion();
            
            showNotification(`Test started: ${testName} (${questions.length} questions)`, 'success');
        }
        
        function loadQuestion() {
            if (!currentTest || !currentTest[currentQuestionIndex]) return;
            
            const question = currentTest[currentQuestionIndex];
            
            // Update UI
            document.getElementById('question-counter').textContent = 
                `Question ${currentQuestionIndex + 1}/${currentTest.length}`;
            document.getElementById('question-text').textContent = question.question;
            
            // Update options
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            ['A', 'B', 'C', 'D'].forEach((letter, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                if (userAnswers[currentQuestionIndex] === index) {
                    optionBtn.classList.add('selected');
                }
                
                optionBtn.innerHTML = `
                    <div class="option-letter">${letter}</div>
                    <div>${question.options[index] || `Option ${letter}`}</div>
                `;
                
                optionBtn.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionBtn);
            });
        }
        
        function selectAnswer(index) {
            userAnswers[currentQuestionIndex] = index;
            
            // Update UI
            const options = document.querySelectorAll('.option-btn');
            options.forEach((btn, i) => {
                btn.classList.remove('selected');
                if (i === index) {
                    btn.classList.add('selected');
                }
            });
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < currentTest.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showNotification('Last question reached! Submit your test.', 'info');
            }
        }
        
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }
        
        function startTimer() {
            if (testTimer) clearInterval(testTimer);
            
            testTimer = setInterval(() => {
                timeRemaining--;
                
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                
                document.getElementById('timer-display').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining <= 0) {
                    clearInterval(testTimer);
                    submitTest();
                    showNotification('Time is up! Test submitted.', 'warning');
                }
            }, 1000);
        }
        
        function submitTest() {
            if (testTimer) clearInterval(testTimer);
            
            // Calculate score
            let correct = 0;
            currentTest.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    correct++;
                }
            });
            
            const score = Math.round((correct / currentTest.length) * 100);
            const timeUsed = Math.floor((Date.now() - testStartTime) / 60000);
            
            // Show results
            document.getElementById('final-score').textContent = `${score}%`;
            document.getElementById('correct-answers').textContent = correct;
            document.getElementById('total-questions').textContent = currentTest.length;
            document.getElementById('time-used').textContent = `${timeUsed} minutes`;
            document.getElementById('test-subject').textContent = 
                currentTest[0]?.subject ? currentTest[0].subject.charAt(0).toUpperCase() + currentTest[0].subject.slice(1) : 'Mixed';
            
            // Show results section
            showSection('results-section');
            
            showNotification(`Test completed! Score: ${score}%`, 'success');
        }
        
        function retakeTest() {
            startTest(currentTest, 'Retake Test');
        }
        
        // ========== EXTERNAL QUESTION LOADING ==========
        async function loadExternalQuestions() {
            showNotification('Fetching questions from multiple sources...', 'info');
            
            try {
                // Try to load from various sources
                const questions = await fetchQuestionsFromMultipleSources();
                
                // Add to local database
                questions.forEach(q => {
                    if (questionDB[q.subject]) {
                        // Avoid duplicates
                        if (!questionDB[q.subject].some(existing => existing.question === q.question)) {
                            questionDB[q.subject].push(q);
                        }
                    }
                });
                
                // Save locally
                localStorage.setItem('jamb_questions', JSON.stringify(questionDB));
                
                showNotification(`âœ… Loaded ${questions.length} new questions!`, 'success');
                
            } catch (error) {
                console.error('Error loading questions:', error);
                showNotification('Using local questions. You can add more manually.', 'warning');
            }
        }
        
        async function fetchQuestionsFromMultipleSources() {
            let allQuestions = [];
            
            // Source 1: Online JAMB question repositories
            const sources = [
                'https://corsproxy.io/?url=' + encodeURIComponent('https://myschool.ng/api/questions?subject=jamb'),
                'https://corsproxy.io/?url=' + encodeURIComponent('https://exam.net.ng/api/jamb-questions'),
                // Add more sources here
            ];
            
            for (const source of sources) {
                try {
                    const response = await fetch(source, { 
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        if (data.questions) {
                            allQuestions = allQuestions.concat(parseQuestions(data.questions));
                        }
                    }
                } catch (error) {
                    // Continue to next source
                    console.log(`Source failed: ${source}`);
                }
            }
            
            // If no external questions loaded, use generated ones
            if (allQuestions.length === 0) {
                allQuestions = generateSampleQuestions();
            }
            
            return allQuestions;
        }
        
        function parseQuestions(data) {
            // Parse questions from various formats
            let questions = [];
            
            if (Array.isArray(data)) {
                data.forEach(item => {
                    if (item.question && item.options) {
                        questions.push({
                            question: item.question,
                            options: item.options,
                            correct: item.correct || 0,
                            explanation: item.explanation || 'No explanation provided',
                            subject: item.subject || 'english',
                            difficulty: item.difficulty || 'medium',
                            year: item.year || new Date().getFullYear()
                        });
                    }
                });
            }
            
            return questions;
        }
        
        // ========== LOCAL QUESTION STORAGE ==========
        function loadLocalQuestions() {
            const saved = localStorage.getItem('jamb_questions');
            if (saved) {
                questionDB = JSON.parse(saved);
            } else {
                // Load initial sample questions
                questionDB = generateSampleQuestionsBySubject();
                localStorage.setItem('jamb_questions', JSON.stringify(questionDB));
            }
        }
        
        function generateSampleQuestionsBySubject() {
            const db = {
                english: [],
                math: [],
                physics: [],
                chemistry: [],
                biology: [],
                government: [],
                economics: [],
                literature: []
            };
            
            // English questions
            for (let i = 1; i <= 20; i++) {
                db.english.push({
                    question: `English Question ${i}: Which sentence is grammatically correct?`,
                    options: ["Option A", "Option B", "Option C", "Option D"],
                    correct: i % 4,
                    explanation: "Explanation for English question " + i,
                    subject: "english",
                    difficulty: ["easy", "medium", "hard"][i % 3],
                    year: 2024
                });
            }
            
            // Math questions
            for (let i = 1; i <= 15; i++) {
                db.math.push({
                    question: `Math Question ${i}: Solve ${i} + ${i*2} = ?`,
                    options: [(i*3).toString(), (i+5).toString(), (i*2).toString(), (i+10).toString()],
                    correct: i % 4,
                    explanation: "Mathematical explanation",
                    subject: "math",
                    difficulty: "medium",
                    year: 2024
                });
            }
            
            // Physics questions
            for (let i = 1; i <= 12; i++) {
                db.physics.push({
                    question: `Physics Question ${i}: What is Newton's ${i} law?`,
                    options: ["Law A", "Law B", "Law C", "Law D"],
                    correct: i % 4,
                    explanation: "Physics explanation",
                    subject: "physics",
                    difficulty: ["easy", "hard"][i % 2],
                    year: 2024
                });
            }
            
            // Other subjects
            ['chemistry', 'biology', 'government', 'economics', 'literature'].forEach(subject => {
                for (let i = 1; i <= 10; i++) {
                    db[subject].push({
                        question: `${subject.charAt(0).toUpperCase() + subject.slice(1)} Question ${i}`,
                        options: ["Choice A", "Choice B", "Choice C", "Choice D"],
                        correct: i % 4,
                        explanation: `Explanation for ${subject} question`,
                        subject: subject,
                        difficulty: "medium",
                        year: 2024
                    });
                }
            });
            
            return db;
        }
        
        function generateSampleQuestions() {
            const questions = [];
            const subjects = ['english', 'math', 'physics', 'chemistry', 'biology', 'government', 'economics', 'literature'];
            
            subjects.forEach(subject => {
                for (let i = 0; i < 5; i++) {
                    questions.push({
                        question: `Sample ${subject} question ${i+1}?`,
                        options: ["Option A", "Option B", "Option C", "Option D"],
                        correct: i % 4,
                        explanation: "This is a sample explanation",
                        subject: subject,
                        difficulty: ["easy", "medium", "hard"][i % 3],
                        year: 2024
                    });
                }
            });
            
            return questions;
        }
        
        // ========== AUTOMATIC QUESTION UPDATES ==========
        // Check for new questions daily
        const lastUpdate = localStorage.getItem('last_question_update');
        if (!lastUpdate || Date.now() - parseInt(lastUpdate) > 86400000) {
            setTimeout(() => {
                loadExternalQuestions();
                localStorage.setItem('last_question_update', Date.now().toString());
            }, 5000);
        }
    </script>
</body>
</html>
