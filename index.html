<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>JAMB Mastermind 300+ - Ace Your Exam!</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22 fill=%22%23004a99%22>ðŸŽ¯</text></svg>">
    
    <style>
        /* === MODERN YOUTH-FRIENDLY THEME === */
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --accent: #ff4e50;
            --success: #00b09b;
            --warning: #f9c74f;
            --danger: #ff416c;
            --dark: #121212;
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-dim: #b0b0b0;
            --neon-glow: 0 0 20px rgba(106, 17, 203, 0.5);
        }
        
        * { 
            box-sizing: border-box; 
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent; 
            font-family: 'Poppins', 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c2461, #1a1a2e);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(106, 17, 203, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(37, 117, 252, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 78, 80, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        /* === HERO BANNER === */
        .hero-banner {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--neon-glow);
        }

        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero-title {
            font-size: 2.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, #fff, #f9c74f);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 20px;
        }

        .score-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(255,255,255,0.15);
            padding: 10px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .score-badge i {
            color: #f9c74f;
            font-size: 1.5rem;
        }

        /* === MAIN DASHBOARD === */
        .dashboard {
            padding: 30px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            border-color: rgba(106, 17, 203, 0.3);
        }

        .dashboard-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .card-header i {
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
        }

        /* === SUBJECT SELECTION === */
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .subject-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .subject-card:hover {
            transform: translateY(-3px);
            background: rgba(106, 17, 203, 0.2);
            border-color: var(--primary);
        }

        .subject-card.selected {
            background: rgba(106, 17, 203, 0.3);
            border-color: var(--primary);
            box-shadow: 0 0 25px rgba(106, 17, 203, 0.3);
        }

        .subject-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .subject-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .question-count {
            font-size: 0.9rem;
            color: var(--text-dim);
        }

        /* === TEST MODE === */
        .test-controls {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .control-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(106, 17, 203, 0.4);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.15);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f9c74f, #ff9a00);
            color: #000;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
        }

        /* === QUESTION INTERFACE === */
        .question-container {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
            display: none;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }

        .question-number {
            font-size: 1.2rem;
            font-weight: 600;
            color: #f9c74f;
        }

        .question-timer {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            background: linear-gradient(45deg, #ff4e50, #f9c74f);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .question-text {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: white;
        }

        .options-grid {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.1rem;
        }

        .option-btn:hover {
            background: rgba(106, 17, 203, 0.2);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .option-btn.selected {
            background: rgba(0, 176, 155, 0.3);
            border-color: var(--success);
        }

        .option-letter {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        /* === PROGRESS TRACKER === */
        .progress-container {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #00ff88);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        /* === LEADERBOARD === */
        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            background: rgba(106, 17, 203, 0.2);
            transform: translateX(5px);
        }

        .rank {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .rank-1 { background: gold; color: #000; }
        .rank-2 { background: silver; color: #000; }
        .rank-3 { background: #cd7f32; color: #000; }
        .rank-other { background: rgba(255,255,255,0.1); color: white; }

        /* === ACHIEVEMENTS === */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .achievement-badge {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .achievement-badge.locked {
            filter: grayscale(1);
            opacity: 0.5;
        }

        .achievement-badge.unlocked {
            background: rgba(0, 176, 155, 0.1);
            border: 2px solid var(--success);
        }

        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        /* === CERTIFICATE === */
        .certificate-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .certificate {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            width: 100%;
            max-width: 800px;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 15px solid var(--primary);
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 20px 50px rgba(106, 17, 203, 0.5); }
            to { box-shadow: 0 20px 50px rgba(37, 117, 252, 0.5); }
        }

        /* === RESPONSIVE DESIGN === */
        @media (max-width: 768px) {
            .hero-title { font-size: 2rem; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .subject-grid { grid-template-columns: repeat(2, 1fr); }
            .test-controls { flex-direction: column; align-items: stretch; }
            .control-group { justify-content: center; }
            .question-container { padding: 20px; }
        }

        @media (max-width: 480px) {
            .subject-grid { grid-template-columns: 1fr; }
            .hero-title { font-size: 1.8rem; }
            .control-btn { width: 100%; justify-content: center; }
        }

        /* === ANIMATIONS === */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!-- === HERO BANNER === -->
    <div class="hero-banner">
        <div class="hero-content">
            <h1 class="hero-title">ðŸŽ¯ JAMB MASTERMIND 300+</h1>
            <p class="hero-subtitle">Ace Your Exam with Smart Practice & Instant Results!</p>
            <div class="score-badge pulse">
                <i class="fas fa-trophy"></i>
                <span>Your High Score: <strong id="highScore">0%</strong></span>
            </div>
        </div>
    </div>

    <!-- === MAIN DASHBOARD === -->
    <div class="dashboard">
        <div class="dashboard-grid">
            <!-- Subject Selection Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-book-open"></i>
                    <h3 class="card-title">Choose Your Subjects</h3>
                </div>
                <p style="color: var(--text-dim); margin-bottom: 20px;">Select subjects for your practice test:</p>
                <div class="subject-grid" id="subjectGrid">
                    <!-- Subjects will be loaded here -->
                </div>
                <div class="test-controls" style="margin-top: 20px; background: none; padding: 0;">
                    <button class="control-btn btn-primary" onclick="TestEngine.startTest()">
                        <i class="fas fa-play-circle"></i>
                        Start Practice Test
                    </button>
                    <button class="control-btn btn-secondary" onclick="TestEngine.startQuickTest()">
                        <i class="fas fa-bolt"></i>
                        Quick Test (10 Questions)
                    </button>
                </div>
            </div>

            <!-- Progress Tracker Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-chart-line"></i>
                    <h3 class="card-title">Your Progress</h3>
                </div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div class="progress-stats">
                        <span>Total Questions: <strong id="totalQuestions">0</strong></span>
                        <span>Correct: <strong id="correctAnswers">0</strong></span>
                        <span>Accuracy: <strong id="accuracyRate">0%</strong></span>
                    </div>
                </div>
                <div style="margin-top: 25px;">
                    <h4 style="color: white; margin-bottom: 15px;">Recent Tests</h4>
                    <div id="recentTests" style="color: var(--text-dim);">
                        No tests taken yet. Start practicing!
                    </div>
                </div>
            </div>

            <!-- Leaderboard Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-crown"></i>
                    <h3 class="card-title">Top Performers</h3>
                </div>
                <div class="leaderboard-list" id="leaderboard">
                    <!-- Leaderboard items will be loaded here -->
                </div>
            </div>

            <!-- Achievements Card -->
            <div class="dashboard-card">
                <div class="card-header">
                    <i class="fas fa-medal"></i>
                    <h3 class="card-title">Your Achievements</h3>
                </div>
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Achievements will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Test Settings -->
        <div class="dashboard-card">
            <div class="card-header">
                <i class="fas fa-sliders-h"></i>
                <h3 class="card-title">Test Settings</h3>
            </div>
            <div class="test-controls" style="background: none; padding: 0; margin: 0;">
                <div style="display: flex; gap: 20px; flex-wrap: wrap; width: 100%;">
                    <div class="setting-group">
                        <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Questions</label>
                        <select id="questionCount" style="
                            padding: 12px 20px;
                            border-radius: 10px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            color: white;
                            min-width: 150px;
                        ">
                            <option value="10">10 Questions</option>
                            <option value="30">30 Questions</option>
                            <option value="60" selected>60 Questions (Standard)</option>
                            <option value="100">100 Questions</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Timer</label>
                        <select id="timerSetting" style="
                            padding: 12px 20px;
                            border-radius: 10px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            color: white;
                            min-width: 150px;
                        ">
                            <option value="0">No Timer</option>
                            <option value="60" selected>60 Minutes</option>
                            <option value="90">90 Minutes</option>
                            <option value="120">120 Minutes</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label style="display: block; color: var(--text-dim); margin-bottom: 5px;">Difficulty</label>
                        <select id="difficultySetting" style="
                            padding: 12px 20px;
                            border-radius: 10px;
                            background: rgba(255,255,255,0.1);
                            border: 1px solid rgba(255,255,255,0.2);
                            color: white;
                            min-width: 150px;
                        ">
                            <option value="mixed">Mixed Difficulty</option>
                            <option value="easy">Easy Only</option>
                            <option value="medium">Medium Only</option>
                            <option value="hard">Hard Only</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Interface -->
        <div class="question-container" id="questionContainer">
            <div class="question-header">
                <div class="question-number" id="questionNumber">Question 1/10</div>
                <div class="question-timer" id="questionTimer">60:00</div>
            </div>
            <div class="question-text" id="questionText">
                Loading question...
            </div>
            <div class="options-grid" id="optionsContainer">
                <!-- Options will be loaded here -->
            </div>
            <div class="test-controls" style="margin-top: 30px;">
                <div class="control-group">
                    <button class="control-btn btn-secondary" onclick="TestEngine.previousQuestion()">
                        <i class="fas fa-arrow-left"></i>
                        Previous
                    </button>
                    <button class="control-btn btn-warning" onclick="TestEngine.markForReview()">
                        <i class="fas fa-flag"></i>
                        Mark for Review
                    </button>
                    <button class="control-btn btn-primary" onclick="TestEngine.nextQuestion()">
                        Next Question
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                <div class="control-group">
                    <button class="control-btn btn-secondary" onclick="TestEngine.showReviewPanel()">
                        <i class="fas fa-list"></i>
                        Review All
                    </button>
                    <button class="control-btn btn-danger" onclick="TestEngine.submitTest()">
                        <i class="fas fa-paper-plane"></i>
                        Submit Test
                    </button>
                </div>
            </div>
            
            <!-- Review Panel -->
            <div class="progress-container" id="reviewPanel" style="display: none; margin-top: 30px;">
                <h4 style="color: white; margin-bottom: 15px;">Review Questions</h4>
                <div id="reviewGrid" style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <!-- Review buttons will be added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div class="certificate-modal" id="certificateModal">
        <div class="certificate" id="certificateContent">
            <div style="text-align: center; margin-bottom: 40px;">
                <h1 style="font-size: 3rem; color: var(--primary); margin-bottom: 10px;">ðŸŽ“</h1>
                <h2 style="font-size: 2.5rem; color: var(--primary); font-weight: 800;">CERTIFICATE OF EXCELLENCE</h2>
                <p style="color: #666; font-size: 1.2rem;">JAMB Mastermind 300+ Testing Platform</p>
            </div>
            
            <div style="text-align: center; margin: 40px 0;">
                <p style="color: #666; font-size: 1.1rem;">This certifies that</p>
                <div style="font-size: 3rem; color: var(--primary); font-weight: 800; margin: 20px 0; text-transform: uppercase;" id="certStudentName">
                    SUPER STUDENT
                </div>
                <p style="font-size: 1.3rem; color: #333; line-height: 1.6; margin: 20px 0;">
                    has demonstrated exceptional performance in JAMB preparation,
                    achieving outstanding results through dedicated practice and mastery.
                </p>
                <div style="font-size: 5rem; color: var(--success); font-weight: 800; margin: 30px 0;" id="certScore">
                    95%
                </div>
                <p style="color: #666; margin-top: 20px;">
                    Date: <span id="certDate">Today</span> | 
                    Test ID: <span id="certTestId">JMB-2024-001</span>
                </p>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-top: 60px; padding-top: 30px; border-top: 2px solid #ccc;">
                <div style="text-align: center;">
                    <div style="width: 200px; height: 1px; background: #333; margin: 0 auto 10px;"></div>
                    <div style="color: #333; font-weight: bold;">Student Signature</div>
                </div>
                <div style="text-align: center;">
                    <div style="width: 200px; height: 1px; background: #333; margin: 0 auto 10px;"></div>
                    <div style="color: #333; font-weight: bold;">Platform Validation</div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px; display: flex; gap: 15px; justify-content: center;">
            <button onclick="TestEngine.printCertificate()" style="
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                border: none;
                color: white;
                padding: 15px 30px;
                border-radius: 10px;
                cursor: pointer;
                font-weight: bold;
                font-size: 1.1rem;
                display: flex;
                align-items: center;
                gap: 10px;
            ">
                <i class="fas fa-print"></i>
                Print Certificate
            </button>
            <button onclick="TestEngine.closeCertificate()" style="
                background: rgba(255,255,255,0.1);
                border: 1px solid rgba(255,255,255,0.3);
                color: white;
                padding: 15px 30px;
                border-radius: 10px;
                cursor: pointer;
                font-weight: bold;
                font-size: 1.1rem;
                display: flex;
                align-items: center;
                gap: 10px;
            ">
                <i class="fas fa-times"></i>
                Close
            </button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script>
        // ============================================
        // ENHANCED QUESTION DATABASE
        // ============================================
        const JAMBQuestionBank = {
            english: [
                {
                    id: 1,
                    question: "Choose the option that best completes the sentence: If I had known you were coming, I _____ a cake.",
                    options: ["would bake", "will bake", "would have baked", "will have baked"],
                    correct: 2,
                    explanation: "Third conditional for past hypothetical situations.",
                    difficulty: "medium"
                },
                {
                    id: 2,
                    question: "What is the meaning of the idiom 'Burn the midnight oil'?",
                    options: ["To stay up late working", "To destroy something valuable", "To waste time", "To work efficiently"],
                    correct: 0,
                    explanation: "It means to work late into the night.",
                    difficulty: "easy"
                }
            ],
            math: [
                {
                    id: 1,
                    question: "Solve for x: 2x + 5 = 15",
                    options: ["5", "10", "7.5", "20"],
                    correct: 0,
                    explanation: "2x = 10, so x = 5",
                    difficulty: "easy"
                },
                {
                    id: 2,
                    question: "What is the value of sinÂ²Î¸ + cosÂ²Î¸?",
                    options: ["0", "1", "2", "It varies"],
                    correct: 1,
                    explanation: "This is a fundamental trigonometric identity.",
                    difficulty: "easy"
                }
            ],
            physics: [
                {
                    id: 1,
                    question: "Which law states that every action has an equal and opposite reaction?",
                    options: ["Newton's First Law", "Newton's Second Law", "Newton's Third Law", "Law of Gravity"],
                    correct: 2,
                    explanation: "Newton's Third Law of Motion.",
                    difficulty: "easy"
                }
            ],
            chemistry: [
                {
                    id: 1,
                    question: "What is the atomic number of Carbon?",
                    options: ["6", "12", "14", "8"],
                    correct: 0,
                    explanation: "Carbon has 6 protons.",
                    difficulty: "easy"
                }
            ],
            biology: [
                {
                    id: 1,
                    question: "Which organelle is known as the 'powerhouse of the cell'?",
                    options: ["Nucleus", "Ribosome", "Mitochondria", "Golgi apparatus"],
                    correct: 2,
                    explanation: "Mitochondria produce energy (ATP).",
                    difficulty: "easy"
                }
            ],
            government: [
                {
                    id: 1,
                    question: "What is the supreme law of Nigeria?",
                    options: ["The Constitution", "National Assembly Acts", "Presidential Decrees", "Common Law"],
                    correct: 0,
                    explanation: "The Constitution is the supreme law.",
                    difficulty: "easy"
                }
            ],
            economics: [
                {
                    id: 1,
                    question: "What does GDP stand for?",
                    options: ["Gross Domestic Product", "General Domestic Price", "Gross Development Plan", "General Development Product"],
                    correct: 0,
                    explanation: "GDP = Gross Domestic Product.",
                    difficulty: "easy"
                }
            ],
            literature: [
                {
                    id: 1,
                    question: "Who wrote 'Things Fall Apart'?",
                    options: ["Wole Soyinka", "Chinua Achebe", "Chimamanda Adichie", "Ben Okri"],
                    correct: 1,
                    explanation: "Chinua Achebe wrote Things Fall Apart.",
                    difficulty: "easy"
                }
            ],
            commerce: [
                {
                    id: 1,
                    question: "What is the primary function of commerce?",
                    options: ["Production", "Distribution", "Consumption", "Exchange"],
                    correct: 3,
                    explanation: "Commerce facilitates exchange of goods and services.",
                    difficulty: "easy"
                }
            ],
            accounting: [
                {
                    id: 1,
                    question: "The accounting equation is:",
                    options: ["Assets = Liabilities + Capital", "Assets = Liabilities - Capital", "Assets + Liabilities = Capital", "Assets - Liabilities = Expenses"],
                    correct: 0,
                    explanation: "Basic accounting equation.",
                    difficulty: "easy"
                }
            ],
            geography: [
                {
                    id: 1,
                    question: "What is the largest desert in the world?",
                    options: ["Sahara", "Arabian", "Gobi", "Antarctic"],
                    correct: 3,
                    explanation: "Antarctic Desert is the largest.",
                    difficulty: "medium"
                }
            ],
            crs: [
                {
                    id: 1,
                    question: "How many books are in the New Testament?",
                    options: ["27", "39", "66", "73"],
                    correct: 0,
                    explanation: "27 books in the New Testament.",
                    difficulty: "easy"
                }
            ],
            history: [
                {
                    id: 1,
                    question: "Who was Nigeria's first President?",
                    options: ["Nnamdi Azikiwe", "Tafawa Balewa", "Obafemi Awolowo", "Ahmadu Bello"],
                    correct: 0,
                    explanation: "Nnamdi Azikiwe was first President.",
                    difficulty: "easy"
                }
            ],
            french: [
                {
                    id: 1,
                    question: "What is the French word for 'book'?",
                    options: ["livre", "maison", "Ã©cole", "voiture"],
                    correct: 0,
                    explanation: "Livre means book in French.",
                    difficulty: "easy"
                }
            ]
        };

        // ============================================
        // TEST ENGINE
        // ============================================
        const TestEngine = {
            currentTest: null,
            currentQuestionIndex: 0,
            userAnswers: [],
            markedQuestions: [],
            timer: null,
            timeRemaining: 0,
            selectedSubjects: [],
            testResults: [],
            
            init() {
                this.loadUserData();
                this.createSubjectGrid();
                this.updateDashboard();
                this.createLeaderboard();
                this.createAchievements();
                
                // Show welcome message
                setTimeout(() => {
                    this.showToast('ðŸŽ¯ Welcome to JAMB Mastermind 300+! Ready to ace your exam?', 'success');
                }, 1000);
            },
            
            loadUserData() {
                const saved = localStorage.getItem('jamb_student_data');
                if (saved) {
                    const data = JSON.parse(saved);
                    this.testResults = data.results || [];
                }
            },
            
            saveUserData() {
                const data = {
                    results: this.testResults,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem('jamb_student_data', JSON.stringify(data));
            },
            
            createSubjectGrid() {
                const subjects = [
                    { id: 'english', name: 'Use of English', icon: 'fa-language', color: '#6a11cb' },
                    { id: 'math', name: 'Mathematics', icon: 'fa-calculator', color: '#2575fc' },
                    { id: 'physics', name: 'Physics', icon: 'fa-atom', color: '#ff4e50' },
                    { id: 'chemistry', name: 'Chemistry', icon: 'fa-flask', color: '#00b09b' },
                    { id: 'biology', name: 'Biology', icon: 'fa-dna', color: '#f9c74f' },
                    { id: 'government', name: 'Government', icon: 'fa-landmark', color: '#ff9a00' },
                    { id: 'economics', name: 'Economics', icon: 'fa-chart-line', color: '#38b000' },
                    { id: 'literature', name: 'Literature', icon: 'fa-book', color: '#9d4edd' },
                    { id: 'commerce', name: 'Commerce', icon: 'fa-shopping-cart', color: '#ff6d00' },
                    { id: 'accounting', name: 'Accounting', icon: 'fa-file-invoice-dollar', color: '#0077b6' },
                    { id: 'geography', name: 'Geography', icon: 'fa-globe-africa', color: '#52b788' },
                    { id: 'crs', name: 'CRS/IRS', icon: 'fa-church', color: '#ff595e' },
                    { id: 'history', name: 'History', icon: 'fa-hourglass-half', color: '#6d6875' },
                    { id: 'french', name: 'French', icon: 'fa-flag', color: '#4361ee' }
                ];
                
                const grid = document.getElementById('subjectGrid');
                grid.innerHTML = subjects.map(subject => `
                    <div class="subject-card" onclick="TestEngine.toggleSubject('${subject.id}')" 
                         data-subject="${subject.id}">
                        <div class="subject-icon">
                            <i class="fas ${subject.icon}" style="color: ${subject.color}"></i>
                        </div>
                        <div class="subject-name">${subject.name}</div>
                        <div class="question-count">${JAMBQuestionBank[subject.id]?.length || 0} questions</div>
                    </div>
                `).join('');
            },
            
            toggleSubject(subjectId) {
                const card = document.querySelector(`[data-subject="${subjectId}"]`);
                const index = this.selectedSubjects.indexOf(subjectId);
                
                if (index === -1) {
                    this.selectedSubjects.push(subjectId);
                    card.classList.add('selected');
                } else {
                    this.selectedSubjects.splice(index, 1);
                    card.classList.remove('selected');
                }
                
                this.showToast(`${this.selectedSubjects.length} subjects selected`, 'info');
            },
            
            startTest() {
                if (this.selectedSubjects.length === 0) {
                    this.showToast('Please select at least one subject!', 'warning');
                    return;
                }
                
                const questionCount = parseInt(document.getElementById('questionCount').value);
                const timerSetting = parseInt(document.getElementById('timerSetting').value);
                const difficulty = document.getElementById('difficultySetting').value;
                
                this.initializeTest(questionCount, timerSetting, difficulty);
                this.showQuestionInterface();
            },
            
            startQuickTest() {
                this.selectedSubjects = ['english', 'math', 'biology'];
                const quickCards = document.querySelectorAll('.subject-card');
                quickCards.forEach(card => {
                    card.classList.remove('selected');
                    const subject = card.dataset.subject;
                    if (this.selectedSubjects.includes(subject)) {
                        card.classList.add('selected');
                    }
                });
                
                this.initializeTest(10, 15, 'mixed');
                this.showQuestionInterface();
            },
            
            initializeTest(questionCount, timerMinutes, difficulty) {
                this.timeRemaining = timerMinutes * 60;
                this.userAnswers = [];
                this.markedQuestions = [];
                this.currentQuestionIndex = 0;
                
                // Generate test questions
                this.currentTest = this.generateTestQuestions(questionCount, difficulty);
                
                // Initialize answers array
                this.userAnswers = new Array(this.currentTest.length).fill(null);
                
                // Start timer if set
                if (timerMinutes > 0) {
                    this.startTimer();
                }
                
                // Load first question
                this.loadCurrentQuestion();
            },
            
            generateTestQuestions(count, difficulty) {
                let questions = [];
                const questionsPerSubject = Math.ceil(count / this.selectedSubjects.length);
                
                this.selectedSubjects.forEach(subject => {
                    let subjectQuestions = JAMBQuestionBank[subject] || [];
                    
                    // Filter by difficulty if not mixed
                    if (difficulty !== 'mixed') {
                        subjectQuestions = subjectQuestions.filter(q => q.difficulty === difficulty);
                    }
                    
                    // Take random questions
                    const shuffled = [...subjectQuestions].sort(() => Math.random() - 0.5);
                    questions.push(...shuffled.slice(0, questionsPerSubject));
                });
                
                // Shuffle all questions and limit to count
                return questions.sort(() => Math.random() - 0.5).slice(0, count);
            },
            
            showQuestionInterface() {
                document.getElementById('questionContainer').style.display = 'block';
                document.getElementById('questionContainer').scrollIntoView({ behavior: 'smooth' });
            },
            
            loadCurrentQuestion() {
                const question = this.currentTest[this.currentQuestionIndex];
                if (!question) return;
                
                // Update UI
                document.getElementById('questionNumber').textContent = 
                    `Question ${this.currentQuestionIndex + 1}/${this.currentTest.length}`;
                document.getElementById('questionText').textContent = question.question;
                
                // Update options
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';
                
                ['A', 'B', 'C', 'D'].forEach((letter, index) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.className = 'option-btn';
                    if (this.userAnswers[this.currentQuestionIndex] === index) {
                        optionBtn.classList.add('selected');
                    }
                    
                    optionBtn.innerHTML = `
                        <div class="option-letter">${letter}</div>
                        <div>${question.options[index] || `Option ${letter}`}</div>
                    `;
                    
                    optionBtn.onclick = () => this.selectOption(index);
                    optionsContainer.appendChild(optionBtn);
                });
                
                this.updateProgress();
            },
            
            selectOption(optionIndex) {
                this.userAnswers[this.currentQuestionIndex] = optionIndex;
                
                // Update UI
                const options = document.querySelectorAll('.option-btn');
                options.forEach((btn, index) => {
                    btn.classList.remove('selected');
                    if (index === optionIndex) {
                        btn.classList.add('selected');
                    }
                });
                
                this.updateProgress();
            },
            
            markForReview() {
                const index = this.currentQuestionIndex;
                if (this.markedQuestions.includes(index)) {
                    this.markedQuestions = this.markedQuestions.filter(i => i !== index);
                    this.showToast('Question unmarked', 'info');
                } else {
                    this.markedQuestions.push(index);
                    this.showToast('Question marked for review', 'warning');
                }
            },
            
            nextQuestion() {
                if (this.currentQuestionIndex < this.currentTest.length - 1) {
                    this.currentQuestionIndex++;
                    this.loadCurrentQuestion();
                } else {
                    this.showToast('Last question reached!', 'info');
                }
            },
            
            previousQuestion() {
                if (this.currentQuestionIndex > 0) {
                    this.currentQuestionIndex--;
                    this.loadCurrentQuestion();
                }
            },
            
            startTimer() {
                if (this.timer) clearInterval(this.timer);
                
                this.timer = setInterval(() => {
                    this.timeRemaining--;
                    
                    const minutes = Math.floor(this.timeRemaining / 60);
                    const seconds = this.timeRemaining % 60;
                    
                    document.getElementById('questionTimer').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    if (this.timeRemaining <= 0) {
                        clearInterval(this.timer);
                        this.submitTest();
                    }
                }, 1000);
            },
            
            showReviewPanel() {
                const panel = document.getElementById('reviewPanel');
                panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
                
                const grid = document.getElementById('reviewGrid');
                grid.innerHTML = '';
                
                for (let i = 0; i < this.currentTest.length; i++) {
                    const btn = document.createElement('button');
                    btn.textContent = i + 1;
                    btn.style.cssText = `
                        width: 40px;
                        height: 40px;
                        border-radius: 8px;
                        border: none;
                        background: ${i === this.currentQuestionIndex ? 
                            'linear-gradient(135deg, var(--primary), var(--secondary))' : 
                            this.markedQuestions.includes(i) ? 
                                'rgba(249, 199, 79, 0.3)' : 
                                this.userAnswers[i] !== null ? 
                                    'rgba(0, 176, 155, 0.3)' : 
                                    'rgba(255,255,255,0.1)'};
                        color: white;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s ease;
                    `;
                    
                    btn.onclick = () => {
                        this.currentQuestionIndex = i;
                        this.loadCurrentQuestion();
                        panel.style.display = 'none';
                    };
                    
                    grid.appendChild(btn);
                }
            },
            
            submitTest() {
                if (this.timer) clearInterval(this.timer);
                
                // Calculate score
                let correct = 0;
                this.currentTest.forEach((question, index) => {
                    if (this.userAnswers[index] === question.correct) {
                        correct++;
                    }
                });
                
                const score = Math.round((correct / this.currentTest.length) * 100);
                
                // Save result
                const studentName = prompt("Enter your name for the certificate:", "Super Student") || "Super Student";
                const testId = `JMB-${Date.now().toString().slice(-6)}`;
                
                const result = {
                    studentName: studentName,
                    score: score,
                    testId: testId,
                    date: new Date().toLocaleString(),
                    subjects: this.selectedSubjects.length,
                    questions: this.currentTest.length,
                    correct: correct,
                    timeSpent: this.timeRemaining > 0 ? 
                        `${Math.floor((this.timeRemaining / 60))} minutes used` : 
                        "Timed test"
                };
                
                // Add to results
                this.testResults.push(result);
                this.saveUserData();
                
                // Show certificate
                this.showCertificate(studentName, score, testId);
                
                // Update dashboard
                this.updateDashboard();
                this.createLeaderboard();
                
                this.showToast(`ðŸŽ‰ Test completed! Score: ${score}%`, 'success');
            },
            
            showCertificate(studentName, score, testId) {
                document.getElementById('certStudentName').textContent = studentName;
                document.getElementById('certScore').textContent = `${score}%`;
                document.getElementById('certDate').textContent = new Date().toLocaleDateString();
                document.getElementById('certTestId').textContent = testId;
                
                document.getElementById('certificateModal').style.display = 'flex';
            },
            
            printCertificate() {
                window.print();
            },
            
            closeCertificate() {
                document.getElementById('certificateModal').style.display = 'none';
                document.getElementById('questionContainer').style.display = 'none';
            },
            
            updateDashboard() {
                // Update high score
                if (this.testResults.length > 0) {
                    const highScore = Math.max(...this.testResults.map(r => r.score));
                    document.getElementById('highScore').textContent = `${highScore}%`;
                }
                
                // Update progress stats
                const totalQuestions = this.testResults.reduce((sum, r) => sum + r.questions, 0);
                const totalCorrect = this.testResults.reduce((sum, r) => sum + r.correct, 0);
                const accuracy = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
                
                document.getElementById('totalQuestions').textContent = totalQuestions;
                document.getElementById('correctAnswers').textContent = totalCorrect;
                document.getElementById('accuracyRate').textContent = `${accuracy}%`;
                document.getElementById('progressFill').style.width = `${accuracy}%`;
                
                // Update recent tests
                const recentTests = document.getElementById('recentTests');
                if (this.testResults.length > 0) {
                    const recent = this.testResults.slice(-3).reverse();
                    recentTests.innerHTML = recent.map(test => `
                        <div style="margin-bottom: 10px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="display: flex; justify-content: space-between;">
                                <span>${test.date.split(',')[0]}</span>
                                <span style="color: var(--success); font-weight: bold;">${test.score}%</span>
                            </div>
                            <div style="font-size: 0.9rem; color: var(--text-dim);">
                                ${test.questions} questions â€¢ ${test.subjects} subjects
                            </div>
                        </div>
                    `).join('');
                }
            },
            
            updateProgress() {
                const answered = this.userAnswers.filter(a => a !== null).length;
                const progress = (answered / this.currentTest.length) * 100;
                
                // You can update a progress bar here if needed
            },
            
            createLeaderboard() {
                const leaderboard = document.getElementById('leaderboard');
                
                // Create dummy leaderboard data for demo
                const topPerformers = [
                    { name: 'You', score: this.testResults.length > 0 ? Math.max(...this.testResults.map(r => r.score)) : 0, rank: 1 },
                    { name: 'Alex Johnson', score: 92, rank: 2 },
                    { name: 'Chioma Ade', score: 88, rank: 3 },
                    { name: 'David Smith', score: 85, rank: 4 },
                    { name: 'Fatima Bello', score: 82, rank: 5 }
                ];
                
                // Sort by score
                topPerformers.sort((a, b) => b.score - a.score);
                
                leaderboard.innerHTML = topPerformers.map((player, index) => `
                    <div class="leaderboard-item">
                        <div class="rank rank-${index + 1}">${index + 1}</div>
                        <div style="flex-grow: 1;">
                            <div style="font-weight: 600;">${player.name}</div>
                            <div style="font-size: 0.9rem; color: var(--text-dim);">
                                ${player.score > 0 ? `${player.score}% accuracy` : 'No tests taken'}
                            </div>
                        </div>
                        <div style="
                            background: linear-gradient(135deg, var(--primary), var(--secondary));
                            color: white;
                            padding: 5px 15px;
                            border-radius: 20px;
                            font-weight: bold;
                        ">
                            ${player.score || 0}%
                        </div>
                    </div>
                `).join('');
            },
            
            createAchievements() {
                const achievements = [
                    { id: 'first_test', name: 'First Test', icon: 'fa-play', description: 'Complete your first test', unlocked: this.testResults.length > 0 },
                    { id: 'high_score', name: 'High Scorer', icon: 'fa-trophy', description: 'Score above 80%', unlocked: this.testResults.some(r => r.score >= 80) },
                    { id: 'quick_thinker', name: 'Quick Thinker', icon: 'fa-bolt', description: 'Complete test in under 30 mins', unlocked: false },
                    { id: 'perfectionist', name: 'Perfectionist', icon: 'fa-star', description: 'Score 100% on any test', unlocked: this.testResults.some(r => r.score === 100) },
                    { id: 'dedicated', name: 'Dedicated', icon: 'fa-heart', description: 'Complete 5 tests', unlocked: this.testResults.length >= 5 },
                    { id: 'subject_master', name: 'Subject Master', icon: 'fa-graduation-cap', description: 'Take all subjects', unlocked: false }
                ];
                
                const grid = document.getElementById('achievementsGrid');
                grid.innerHTML = achievements.map(achievement => `
                    <div class="achievement-badge ${achievement.unlocked ? 'unlocked' : 'locked'}" 
                         title="${achievement.description}">
                        <div class="achievement-icon">
                            <i class="fas ${achievement.icon}"></i>
                        </div>
                        <div style="font-size: 0.9rem; font-weight: 600;">${achievement.name}</div>
                    </div>
                `).join('');
            },
            
            showToast(message, type = 'info') {
                // Create custom toast
                const toast = document.createElement('div');
                toast.textContent = message;
                toast.style.cssText = `
                    position: fixed;
                    bottom: 30px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: ${type === 'success' ? 'linear-gradient(135deg, var(--success), #00ff88)' : 
                               type === 'warning' ? 'linear-gradient(135deg, var(--warning), #ff9a00)' : 
                               type === 'error' ? 'linear-gradient(135deg, var(--danger), #ff4b2b)' :
                               'linear-gradient(135deg, var(--primary), var(--secondary))'};
                    color: white;
                    padding: 15px 30px;
                    border-radius: 15px;
                    z-index: 10000;
                    font-weight: 600;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    animation: fadeIn 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    backdrop-filter: blur(10px);
                `;
                
                // Add icon based on type
                const icon = type === 'success' ? 'ðŸŽ‰' : 
                            type === 'warning' ? 'âš ï¸' : 
                            type === 'error' ? 'âŒ' : 'â„¹ï¸';
                toast.innerHTML = `${icon} ${toast.textContent}`;
                
                document.body.appendChild(toast);
                setTimeout(() => {
                    toast.style.animation = 'fadeIn 0.3s ease reverse forwards';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
        };

        // ============================================
        // INITIALIZE EVERYTHING
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Test Engine
            TestEngine.init();
            
            // Add some initial data for demo
            if (localStorage.getItem('jamb_student_data') === null) {
                // Create demo test results
                TestEngine.testResults = [
                    {
                        studentName: "Demo Student",
                        score: 75,
                        testId: "JMB-DEMO-001",
                        date: new Date().toLocaleString(),
                        subjects: 3,
                        questions: 30,
                        correct: 23
                    }
                ];
                TestEngine.saveUserData();
                TestEngine.updateDashboard();
            }
            
            // Auto-select some subjects for demo
            setTimeout(() => {
                ['english', 'math', 'biology'].forEach(subject => {
                    TestEngine.toggleSubject(subject);
                });
            }, 500);
        });

        // Force HTTPS for GitHub Pages
        if (window.location.protocol === 'http:' && 
            window.location.hostname.includes('github.io')) {
            window.location.href = window.location.href.replace('http:', 'https:');
        }
    </script>
</body>
</html>

