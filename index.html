<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAMB Mastermind 300 - Orient Neo 7 Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #004a99;
            --secondary: #00a859;
            --accent: #ff6b35;
            --light: #f8f9fa;
            --dark: #2d3436;
            --success: #28a745;
            --gold: #FFD700;
            --danger: #dc3545;
            --warning: #ffc107;
            --purple: #6f42c1;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --premium: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        }
        
        body { 
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); 
            min-height: 100vh; 
            padding: 15px; 
        }

        .app-container { 
            max-width: 1100px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 15px; 
            overflow: hidden; 
            box-shadow: var(--shadow);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* PREMIUM BADGES */
        .premium-badge {
            background: var(--premium);
            color: white;
            font-size: 0.7rem;
            font-weight: bold;
            padding: 3px 10px;
            border-radius: 15px;
            display: inline-block;
            margin-left: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .premium-card {
            border: 2px solid #667eea;
            position: relative;
            overflow: hidden;
        }

        .premium-card::before {
            content: 'PREMIUM';
            position: absolute;
            top: 10px;
            right: -25px;
            background: var(--premium);
            color: white;
            padding: 3px 30px;
            font-size: 0.7rem;
            font-weight: bold;
            transform: rotate(45deg);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* PAYMENT MODAL */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .payment-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .payment-header {
            background: linear-gradient(90deg, var(--primary), #003366);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .payment-header h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .close-payment {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .payment-plans {
            padding: 20px;
            display: grid;
            gap: 15px;
        }

        .plan-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .plan-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
        }

        .plan-card.selected {
            border-color: var(--secondary);
            background: #f0fff5;
        }

        .plan-price {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 10px 0;
        }

        .plan-features {
            list-style: none;
            margin: 15px 0;
        }

        .plan-features li {
            padding: 5px 0;
            color: #555;
        }

        .plan-features li i {
            color: var(--success);
            margin-right: 10px;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
            padding: 20px;
            border-top: 1px solid #eee;
        }

        .payment-method {
            text-align: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover {
            border-color: var(--primary);
        }

        .payment-method.selected {
            border-color: var(--secondary);
            background: #f0fff5;
        }

        .payment-method i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #555;
        }

        /* USER PROFILE */
        .user-profile {
            position: absolute;
            top: 20px;
            right: 120px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        .user-dropdown {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            min-width: 200px;
            z-index: 1000;
            overflow: hidden;
        }

        .user-dropdown.show {
            display: block;
        }

        .user-dropdown-item {
            padding: 12px 20px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-dropdown-item:hover {
            background: #f5f5f5;
        }

        .user-dropdown-item i {
            width: 20px;
            color: var(--primary);
        }

        /* HEADER */
        .header { 
            background: linear-gradient(90deg, var(--primary), #003366);
            color: white; 
            padding: 20px; 
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header h2 { 
            font-size: 1.8rem; 
            margin-bottom: 5px; 
        }
        .header-subtitle { 
            font-size: 0.9rem; 
            opacity: 0.9; 
        }
        .study-clock { 
            background: rgba(0,0,0,0.3); 
            padding: 8px 20px; 
            border-radius: 25px; 
            display: inline-block; 
            margin-top: 10px; 
            font-weight: bold; 
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }
        .header-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        /* DASHBOARD */
        .dashboard-info {
            padding: 20px 20px 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        .stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .stat-box {
            background: var(--light);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: bold;
            color: var(--dark);
        }
        .stat-box i {
            margin-right: 5px;
            color: var(--primary);
        }
        .dashboard-tabs {
            display: flex;
            border-bottom: 2px solid #eee;
            margin: 0 20px;
        }
        .tab-btn {
            padding: 15px 25px;
            background: none;
            border: none;
            font-weight: 600;
            cursor: pointer;
            color: #666;
            position: relative;
            transition: all 0.3s;
        }
        .tab-btn.active {
            color: var(--primary);
        }
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
        }
        .tab-content {
            padding: 20px;
        }
        .grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
            gap: 15px; 
        }
        .card { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            text-align: center; 
            cursor: pointer; 
            transition: 0.3s;
            border: 2px solid #eaeaea;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 140px;
            overflow: hidden;
        }
        .card:hover { 
            transform: translateY(-8px); 
            border-color: var(--secondary);
            box-shadow: 0 10px 20px rgba(0,168,89,0.1);
        }
        .card i { 
            font-size: 2.5rem; 
            margin-bottom: 15px; 
        }
        .card p { 
            font-weight: 600; 
            color: var(--dark);
            margin-top: 5px;
        }
        .card small {
            font-size: 0.75rem;
            color: #666;
            margin-top: 5px;
        }
        
        /* VALUE BET STYLING */
        .value-bet-tag {
            position: absolute;
            top: 8px;
            right: 8px;
            background: linear-gradient(45deg, var(--gold), #ffed4e);
            color: #333;
            font-size: 9px;
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 2;
            border: 1px solid rgba(255, 215, 0, 0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* MOCK EXAM SETUP */
        .mock-setup {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .setup-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .setup-option {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #eaeaea;
        }
        .setup-option h4 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        .checkbox-group {
            margin: 10px 0;
        }
        .checkbox-group label {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
        }
        .checkbox-group input {
            margin-right: 10px;
        }
        .multiplayer-setup {
            background: #eef7ff;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .player-list {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .player-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            min-width: 150px;
            text-align: center;
        }
        .player-card.you {
            border-color: var(--primary);
            background: #f0f8ff;
        }
        .invite-section {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .invite-input {
            flex-grow: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        /* QUESTION INTERFACE */
        #quiz-section { 
            display: none; 
            padding: 25px; 
            min-height: 500px;
        }
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
            flex-wrap: wrap;
            gap: 15px;
        }
        .subject-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--secondary);
            width: 0%;
            transition: width 0.5s ease;
        }
        .question-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #666;
            flex-wrap: wrap;
            gap: 10px;
        }
        .question-box { 
            font-size: 1.25rem; 
            margin-bottom: 25px; 
            color: var(--dark); 
            font-weight: 600;
            line-height: 1.5;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            border-left: 5px solid var(--primary);
        }
        .options-container {
            margin-bottom: 30px;
        }
        .option { 
            display: block; 
            width: 100%; 
            padding: 16px 20px; 
            margin-bottom: 12px; 
            border: 2px solid #ddd; 
            border-radius: 10px; 
            text-align: left; 
            cursor: pointer; 
            background: white;
            font-size: 1rem;
            transition: all 0.2s;
            position: relative;
        }
        .option:hover { 
            background: #f0f7ff; 
            border-color: var(--primary); 
            transform: translateX(5px);
        }
        .option.selected { 
            background: var(--primary); 
            color: white; 
            border-color: var(--primary); 
        }
        .option.correct { 
            background: var(--success); 
            color: white; 
            border-color: var(--success); 
        }
        .option.wrong { 
            background: var(--danger); 
            color: white; 
            border-color: var(--danger); 
        }
        .option-letter {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #eee;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 15px;
            font-weight: bold;
            color: var(--dark);
        }
        .selected .option-letter, .correct .option-letter, .wrong .option-letter {
            background: rgba(255,255,255,0.3);
            color: white;
        }
        
        /* MOCK EXAM TIMER */
        .mock-timer {
            background: var(--danger);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.2rem;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* BUTTONS */
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            flex-wrap: wrap;
            gap: 15px;
        }
        .btn { 
            padding: 12px 25px; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 1rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .btn:active {
            transform: translateY(-1px);
        }
        .btn-primary { 
            background: var(--primary); 
            color: white; 
        }
        .btn-secondary { 
            background: var(--secondary); 
            color: white; 
}
        .btn-accent { 
            background: var(--accent); 
            color: white; 
        }
        .btn-danger { 
            background: var(--danger); 
            color: white; 
        }
        .btn-purple { 
            background: var(--purple); 
            color: white; 
        }
        .btn-gold {
            background: linear-gradient(45deg, var(--gold), #ffed4e);
            color: #333;
            font-weight: bold;
        }
        .btn-premium {
            background: var(--premium);
            color: white;
            font-weight: bold;
        }
        
        /* BACK BUTTON */
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            backdrop-filter: blur(5px);
        }
        .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* RESULTS SCREEN */
        #results-section {
            display: none;
            padding: 30px;
        }
        .result-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .result-icon {
            font-size: 4rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }
        .score-display {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--primary);
            margin: 20px 0;
        }
        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        .result-box {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        .result-box h3 {
            margin-bottom: 10px;
            font-size: 1rem;
        }
        .result-box p {
            font-size: 1.8rem;
            font-weight: bold;
        }
        .score-breakdown {
            margin-top: 40px;
        }
        .subject-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f9f9f9;
            margin-bottom: 10px;
            border-radius: 8px;
        }
        .score-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        .score-fill {
            height: 100%;
            background: var(--secondary);
        }
        .leaderboard {
            margin-top: 40px;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
        }
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid #eee;
        }
        .leaderboard-item.you {
            background: #eef7ff;
            border-radius: 8px;
        }
        
        /* FOOTER */
        .footer { 
            background: #f5f5f5; 
            padding: 25px 20px; 
            text-align: center; 
            font-size: 0.9rem; 
            color: #666;
            border-top: 1px solid #ddd;
        }
        .footer-links { 
            display: flex; 
            justify-content: center; 
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
        }
        .footer a { 
            color: var(--primary); 
            text-decoration: none; 
            font-weight: 600; 
            transition: color 0.3s;
        }
        .footer a:hover { 
            color: var(--accent); 
            text-decoration: underline;
        }
        
        /* NOTIFICATIONS */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 10000;
            box-shadow: var(--shadow);
            animation: slideInRight 0.3s ease;
        }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        /* TEST BUTTON */
        .test-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
            .question-box { font-size: 1.1rem; }
            .dashboard-info { flex-direction: column; align-items: flex-start; }
            .button-container { flex-direction: column; }
            .btn { width: 100%; justify-content: center; }
            .header-buttons { position: static; justify-content: center; margin-top: 15px; }
            .setup-options { grid-template-columns: 1fr; }
            .back-btn { position: static; margin: 10px 0; }
            .value-bet-tag {
                top: 5px;
                right: 5px;
                font-size: 8px;
                padding: 1px 6px;
            }
            .user-profile {
                position: static;
                margin: 10px 0;
            }
            .payment-methods {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .card { padding: 15px; min-height: 120px; }
            .btn { padding: 10px 15px; font-size: 0.9rem; }
            .question-box { font-size: 1.1rem; padding: 12px; }
            .option { padding: 12px 15px; margin-bottom: 8px; }
            .header h2 { font-size: 1.5rem; }
            .dashboard-info { padding: 15px; }
            .value-bet-tag {
                top: 3px;
                right: 3px;
                font-size: 7px;
                padding: 1px 4px;
            }
        }
        
        @media (max-width: 576px) {
            .card { min-height: 120px; padding: 15px 10px; }
            .card i { font-size: 2rem; margin-bottom: 10px; }
            .question-box { font-size: 1rem; }
            .option { padding: 12px 15px; font-size: 0.95rem; }
            .btn { padding: 10px 15px; font-size: 0.9rem; }
            .header h2 { font-size: 1.3rem; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <button class="back-btn" id="back-to-dashboard" style="display: none;" onclick="returnToDashboard()">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </button>
        <h2>JAMB MASTERMIND 300</h2>
        <div class="header-subtitle">Orient Neo 7 Edition - Ultimate UTME Preparation Platform</div>
        <div class="study-clock" id="session-timer">
            <i class="far fa-clock"></i> Session: Not Started
        </div>
        
        <div class="user-profile">
            <div class="user-avatar" onclick="toggleUserDropdown()" id="user-avatar">
                S
            </div>
            <div class="user-dropdown" id="user-dropdown">
                <div class="user-dropdown-item" onclick="viewProfile()">
                    <i class="fas fa-user"></i> My Profile
                </div>
                <div class="user-dropdown-item" onclick="viewSubscription()">
                    <i class="fas fa-crown"></i> Subscription Status
                </div>
                <div class="user-dropdown-item" onclick="viewPurchaseHistory()">
                    <i class="fas fa-history"></i> Purchase History
                </div>
                <div class="user-dropdown-item" onclick="upgradeToPremium()">
                    <i class="fas fa-gem"></i> Upgrade to Premium
                </div>
                <div class="user-dropdown-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </div>
            </div>
        </div>
        
        <div class="header-buttons">
            <button class="btn btn-premium" onclick="upgradeToPremium()">
                <i class="fas fa-crown"></i> Upgrade
            </button>
            <button class="btn btn-accent" onclick="openTab('mock-tab')">
                <i class="fas fa-graduation-cap"></i> Mock Exam
            </button>
            <button class="btn btn-purple" onclick="showAnalytics()">
                <i class="fas fa-chart-bar"></i> Analytics
            </button>
        </div>
    </div>

    <div id="dashboard">
        <div class="dashboard-info">
            <div>
                <h3>Select Subject</h3>
                <p style="font-size: 0.8rem; color: #666;">2,000 Questions per Subject Loaded • Powered by AI Analytics</p>
            </div>
            <div class="stats">
                <div class="stat-box"><i class="fas fa-question-circle"></i> 8,000 Total Questions</div>
                <div class="stat-box"><i class="fas fa-chart-line"></i> Performance Tracking</div>
                <div class="stat-box"><i class="fas fa-crown"></i> <span id="user-plan">Free Plan</span></div>
            </div>
        </div>
        
        <div class="dashboard-tabs">
            <button class="tab-btn active" onclick="openTab('practice-tab')">Practice Mode</button>
            <button class="tab-btn" onclick="openTab('mock-tab')">Mock Exam</button>
            <button class="tab-btn" onclick="openTab('premium-tab')">Premium Features</button>
            <button class="tab-btn" onclick="openTab('multiplayer-tab')">Study Groups</button>
        </div>
        
        <div id="practice-tab" class="tab-content" style="display: block;">
            <div class="grid">
                <div class="card premium-card" onclick="checkPremiumAccess('english')">
                    <div class="value-bet-tag">VALUE BET</div>
                    <i class="fas fa-book fa-2x" style="color:#004a99"></i>
                    <p>English Language <span class="premium-badge">Premium</span></p>
                    <small>2,000 Questions + AI Explanations</small>
                </div>
                <div class="card" onclick="checkPremiumAccess('math')">
                    <i class="fas fa-calculator fa-2x" style="color:#004a99"></i>
                    <p>Mathematics</p>
                    <small>2,000 Questions</small>
                </div>
                <div class="card premium-card" onclick="checkPremiumAccess('physics')">
                    <i class="fas fa-atom fa-2x" style="color:#004a99"></i>
                    <p>Physics <span class="premium-badge">Premium</span></p>
                    <small>2,000 Questions + Video Solutions</small>
                </div>
                <div class="card" onclick="checkPremiumAccess('biology')">
                    <i class="fas fa-dna fa-2x" style="color:#004a99"></i>
                    <p>Biology</p>
                    <small>2,000 Questions</small>
                </div>
                <div class="card premium-card" onclick="checkPremiumAccess('chemistry')">
                    <i class="fas fa-flask fa-2x" style="color:#004a99"></i>
                    <p>Chemistry <span class="premium-badge">Premium</span></p>
                    <small>2,000 Questions + 3D Models</small>
                </div>
                <div class="card" onclick="checkPremiumAccess('government')">
                    <i class="fas fa-landmark fa-2x" style="color:#004a99"></i>
                    <p>Government</p>
                    <small>2,000 Questions</small>
                </div>
                <div class="card premium-card" onclick="checkPremiumAccess('economics')">
                    <i class="fas fa-chart-bar fa-2x" style="color:#004a99"></i>
                    <p>Economics <span class="premium-badge">Premium</span></p>
                    <small>2,000 Questions + Case Studies</small>
                </div>
                <div class="card" onclick="checkPremiumAccess('literature')">
                    <i class="fas fa-pen-alt fa-2x" style="color:#004a99"></i>
                    <p>Literature</p>
                    <small>2,000 Questions</small>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-gold" onclick="quickDemo()">
                    <i class="fas fa-rocket"></i> Quick Demo (3 Questions)
                </button>
                <button class="btn btn-premium" onclick="upgradeToPremium()" style="margin-left: 10px;">
                    <i class="fas fa-unlock"></i> Unlock All Subjects
                </button>
            </div>
        </div>
        
        <div id="premium-tab" class="tab-content" style="display: none;">
            <div style="text-align: center; padding: 30px;">
                <i class="fas fa-crown fa-4x" style="background: var(--premium); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px;"></i>
                <h2>Upgrade to Premium</h2>
                <p style="margin-bottom: 30px;">Get unlimited access to all features and maximize your JAMB score</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div class="plan-card" onclick="selectPlan('basic')">
                        <h3>Basic Plan</h3>
                        <div class="plan-price">₦2,500</div>
                        <p>Monthly Access</p>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> All 8 Subjects</li>
                            <li><i class="fas fa-check"></i> 5 Mock Exams</li>
                            <li><i class="fas fa-check"></i> Basic Analytics</li>
                            <li><i class="fas fa-check"></i> Mobile Access</li>
                            <li><i class="fas fa-times"></i> No Video Solutions</li>
                        </ul>
                        <button class="btn btn-primary">Select Plan</button>
                    </div>
                    
                    <div class="plan-card selected" onclick="selectPlan('pro')">
                        <h3>Pro Plan <span class="premium-badge">Most Popular</span></h3>
                        <div class="plan-price">₦5,000</div>
                        <p>Monthly Access</p>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> All 8 Subjects</li>
                            <li><i class="fas fa-check"></i> Unlimited Mock Exams</li>
                            <li><i class="fas fa-check"></i> Advanced Analytics</li>
                            <li><i class="fas fa-check"></i> Video Solutions</li>
                            <li><i class="fas fa-check"></i> AI Tutor Support</li>
                        </ul>
                        <button class="btn btn-premium">Select Plan</button>
                    </div>
                    
                    <div class="plan-card" onclick="selectPlan('ultimate')">
                        <h3>Ultimate Plan</h3>
                        <div class="plan-price">₦12,000</div>
                        <p>3 Months Access</p>
                        <ul class="plan-features">
                            <li><i class="fas fa-check"></i> All Pro Features</li>
                            <li><i class="fas fa-check"></i> Personal Tutor</li>
                            <li><i class="fas fa-check"></i> Study Schedule</li>
                            <li><i class="fas fa-check"></i> Priority Support</li>
                            <li><i class="fas fa-check"></i> Certificate</li>
                        </ul>
                        <button class="btn btn-primary">Select Plan</button>
                    </div>
                </div>
                
                <div style="margin-top: 40px; padding: 20px; background: #f9f9f9; border-radius: 10px;">
                    <h3>Payment Methods Available</h3>
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;">
                        <div style="text-align: center;">
                            <i class="fab fa-paypal fa-3x" style="color: #003087;"></i>
                            <p>PayPal</p>
                        </div>
                        <div style="text-align: center;">
                            <i class="fas fa-credit-card fa-3x" style="color: #004a99;"></i>
                            <p>Card Payment</p>
                        </div>
                        <div style="text-align: center;">
                            <i class="fas fa-university fa-3x" style="color: #00a859;"></i>
                            <p>Bank Transfer</p>
                        </div>
                        <div style="text-align: center;">
                            <i class="fas fa-mobile-alt fa-3x" style="color: #ff6b35;"></i>
                            <p>Mobile Money</p>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-premium" onclick="upgradeToPremium()" style="margin-top: 30px; padding: 15px 40px; font-size: 1.2rem;">
                    <i class="fas fa-bolt"></i> Upgrade Now & Get 30% Off
                </button>
            </div>
        </div>
        
        <div id="mock-tab" class="tab-content" style="display: none;">
            <div class="mock-setup">
                <h3><i class="fas fa-graduation-cap"></i> JAMB Mock Exam Simulation</h3>
                <p>Simulate the actual JAMB exam experience with random questions from all subjects.</p>
                
                <div style="margin: 20px 0; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                    <i class="fas fa-exclamation-circle"></i> 
                    <strong>Premium Feature:</strong> Unlimited mock exams available. Free users limited to 2 per month.
                    <button class="btn btn-premium" onclick="upgradeToPremium()" style="margin-left: 10px; padding: 5px 15px; font-size: 0.9rem;">
                        <i class="fas fa-unlock"></i> Unlock Unlimited
                    </button>
                </div>
                
                <div class="setup-options">
                    <div class="setup-option">
                        <h4><i class="fas fa-clock"></i> Exam Duration</h4>
                        <div class="checkbox-group">
                            <label>
                                <input type="radio" name="duration" value="120" checked> 2 Hours (Standard)
                            </label>
                            <label>
                                <input type="radio" name="duration" value="90"> 1.5 Hours (Quick)
                            </label>
                            <label>
                                <input type="radio" name="duration" value="180"> 3 Hours (Extended)
                            </label>
                        </div>
                    </div>
                    
                    <div class="setup-option">
                        <h4><i class="fas fa-question-circle"></i> Questions</h4>
                        <div class="checkbox-group">
                            <label>
                                <input type="radio" name="questions" value="180" checked> 180 Questions (JAMB Standard)
                            </label>
                            <label>
                                <input type="radio" name="questions" value="100"> 100 Questions (Quick Test)
                            </label>
                            <label>
                                <input type="radio" name="questions" value="60"> 60 Questions (Subject Focus)
                            </label>
                        </div>
                    </div>
                    
                    <div class="setup-option">
                        <h4><i class="fas fa-book"></i> Subjects to Include</h4>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" name="subjects" value="english" checked> English
                            </label>
                            <label>
                                <input type="checkbox" name="subjects" value="math" checked> Mathematics
                            </label>
                            <label>
                                <input type="checkbox" name="subjects" value="physics"> Physics
                            </label>
                            <label>
                                <input type="checkbox" name="subjects" value="biology"> Biology
                            </label>
                            <label>
                                <input type="checkbox" name="subjects" value="chemistry"> Chemistry
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="multiplayer-setup">
                    <h4><i class="fas fa-users"></i> Multiplayer Mock Exam (Premium Feature)</h4>
                    <p>Invite up to 2 friends to take the mock exam together and compare scores.</p>
                    
                    <div class="player-list" id="player-list">
                        <div class="player-card you">
                            <i class="fas fa-user-circle fa-2x"></i>
                            <p>You (Host)</p>
                            <small>Ready</small>
                        </div>
                    </div>
                    
                    <div class="invite-section">
                        <input type="text" class="invite-input" id="invite-code" value="JAMB-7X9P2" readonly>
                        <button class="btn btn-primary" onclick="copyInviteCode()">
                            <i class="fas fa-copy"></i> Copy Code
                        </button>
                        <button class="btn btn-premium" onclick="joinMockSession()">
                            <i class="fas fa-user-plus"></i> Join Session
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <input type="text" class="invite-input" placeholder="Enter friend's code to invite" id="friend-code">
                        <button class="btn btn-accent" onclick="inviteFriend()">
                            <i class="fas fa-paper-plane"></i> Invite Friend
                        </button>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" style="padding: 15px 40px; font-size: 1.2rem;" onclick="startMockExam()">
                        <i class="fas fa-play-circle"></i> Start Mock Exam
                    </button>
                    <button class="btn btn-premium" onclick="upgradeToPremium()" style="margin-left: 10px;">
                        <i class="fas fa-unlock"></i> Unlock All Features
                    </button>
                </div>
            </div>
        </div>
        
        <div id="multiplayer-tab" class="tab-content" style="display: none;">
            <div style="text-align: center; padding: 40px 20px;">
                <i class="fas fa-users fa-4x" style="color: var(--purple); margin-bottom: 20px;"></i>
                <h3>Study Groups & Multiplayer</h3>
                <p style="margin-bottom: 30px;">Connect with friends for collaborative learning and mock exams</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div class="card premium-card" onclick="createStudyGroup()">
                        <i class="fas fa-plus-circle fa-3x" style="color: var(--secondary);"></i>
                        <h4>Create Group <span class="premium-badge">Premium</span></h4>
                        <p>Start a new study group</p>
                    </div>
                    
                    <div class="card premium-card" onclick="joinStudyGroup()">
                        <i class="fas fa-user-plus fa-3x" style="color: var(--primary);"></i>
                        <h4>Join Group <span class="premium-badge">Premium</span></h4>
                        <p>Join existing study group</p>
                    </div>
                    
                    <div class="card" onclick="viewLeaderboard()">
                        <i class="fas fa-trophy fa-3x" style="color: var(--gold);"></i>
                        <h4>Leaderboard</h4>
                        <p>See top performers</p>
                    </div>
                </div>
                
                <div style="margin-top: 40px; padding: 20px; background: #eef7ff; border-radius: 10px;">
                    <h3>Premium Study Groups Feature</h3>
                    <p>Create private study groups with friends, track group progress, and compete in group challenges.</p>
                    <button class="btn btn-premium" onclick="upgradeToPremium()" style="margin-top: 15px;">
                        <i class="fas fa-unlock"></i> Unlock Study Groups
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="quiz-section">
        <!-- Quiz content will be loaded here -->
    </div>

    <div id="results-section">
        <!-- Results will be loaded here -->
    </div>

    <div class="footer">
        <div class="footer-links">
            <a href="javascript:void(0)" onclick="openTab('premium-tab')">Premium Plans</a> | 
            <a href="javascript:void(0)" onclick="showPaymentHistory()">Payment History</a> | 
            <a href="https://www.khanacademy.org/" target="_blank">Khan Academy</a> | 
            <a href="https://myschool.ng/jamb-practice" target="_blank">MySchool Hub</a> | 
            <a href="https://www.jamb.gov.ng" target="_blank">JAMB Official</a> |
            <a href="https://pastquestionhub.com" target="_blank">Past Questions</a>
        </div>
        <hr style="margin: 10px auto; width: 80%; opacity: 0.3;">
        <p>Support: orientalgrid@gmail.com | 2348103365359</p>
        <p style="margin-top: 10px; font-size: 0.8rem;">© 2026 JAMB Mastermind 300 - Orient Neo 7 Edition. All Rights Reserved.</p>
        <p style="font-size: 0.8rem; color: #888;">
            <i class="fas fa-shield-alt"></i> Secure Payment Processing via Flutterwave & Paystack
        </p>
    </div>
</div>

<!-- Payment Modal -->
<div class="payment-modal" id="payment-modal">
    <div class="payment-content">
        <div class="payment-header">
            <h3><i class="fas fa-lock"></i> Secure Payment</h3>
            <p>Complete your subscription upgrade</p>
            <button class="close-payment" onclick="closePaymentModal()">&times;</button>
        </div>
        
        <div style="padding: 20px;">
            <div id="payment-summary">
                <h4>Order Summary</h4>
                <div style="display: flex; justify-content: space-between; margin: 15px 0; padding: 15px; background: #f9f9f9; border-radius: 8px;">
                    <div>
                        <strong id="selected-plan-name">Pro Plan</strong><br>
                        <small id="selected-plan-desc">Monthly Access</small>
                    </div>
                    <div style="text-align: right;">
                        <strong id="selected-plan-price">₦5,000</strong><br>
                        <small id="selected-plan-duration">per month</small>
                    </div>
                </div>
            </div>
            
            <div class="payment-methods">
                <div class="payment-method selected" onclick="selectPaymentMethod('card')">
                    <i class="fas fa-credit-card"></i>
                    <p>Card</p>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('transfer')">
                    <i class="fas fa-university"></i>
                    <p>Transfer</p>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('paypal')">
                    <i class="fab fa-paypal"></i>
                    <p>PayPal</p>
                </div>
                <div class="payment-method" onclick="selectPaymentMethod('ussd')">
                    <i class="fas fa-mobile-alt"></i>
                    <p>USSD</p>
                </div>
            </div>
            
            <div id="card-payment-form" style="margin-top: 20px;">
                <h4>Card Details</h4>
                <input type="text" placeholder="Card Number" style="width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <input type="text" placeholder="MM/YY" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                    <input type="text" placeholder="CVV" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px;">
                </div>
                <input type="text" placeholder="Name on Card" style="width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px;">
            </div>
            
            <div id="transfer-payment-form" style="margin-top: 20px; display: none;">
                <h4>Bank Transfer Details</h4>
                <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin: 10px 0;">
                    <p><strong>Bank:</strong> Zenith Bank</p>
                    <p><strong>Account Name:</strong> Orient Neo 7 EduTech</p>
                    <p><strong>Account Number:</strong> 1012345678</p>
                    <p><strong>Reference:</strong> <span id="payment-reference">JAMB-${Date.now()}</span></p>
                </div>
                <p style="font-size: 0.9rem; color: #666;">
                    <i class="fas fa-info-circle"></i> Upload proof of payment after transfer
                </p>
                <input type="file" accept="image/*" style="width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px;">
            </div>
            
            <button class="btn btn-premium" onclick="processPayment()" style="width: 100%; padding: 15px; margin-top: 20px;">
                <i class="fas fa-lock"></i> Pay Securely
            </button>
            
            <div style="margin-top: 15px; text-align: center;">
                <img src="https://flutterwave.com/images/flutterwave-logo.svg" alt="Flutterwave" style="height: 30px; margin: 0 10px;">
                <img src="https://paystack.com/assets/website/images/paystack-logo-vector.svg" alt="Paystack" style="height: 30px; margin: 0 10px;">
            </div>
            
            <p style="font-size: 0.8rem; text-align: center; margin-top: 10px; color: #666;">
                <i class="fas fa-shield-alt"></i> 256-bit SSL Encryption • No card details stored
            </p>
        </div>
    </div>
</div>

<!-- Development Test Button -->
<button class="btn btn-gold test-button" id="dev-test-btn" onclick="enableTestMode()">
    <i class="fas fa-flask"></i> DEV TEST
</button>

<script>
    // =================== COMPLETE QUIZ DATABASE ===================
    const QUESTION_DATABASE = {
        english: [
            {
                question: "Choose the option that best completes the sentence: If I had known, I _____ come earlier.",
                options: ["would have", "will have", "would", "will"],
                correct: 0,
                explanation: "The correct answer is 'would have' because it's a third conditional sentence expressing a past unreal condition."
            },
            {
                question: "Identify the grammatically correct sentence:",
                options: ["She don't like apples", "She doesn't likes apples", "She doesn't like apples", "She not likes apples"],
                correct: 2,
                explanation: "'She doesn't like apples' is correct because with third person singular (she), we use 'doesn't' + base form of verb."
            },
            {
                question: "What is the synonym of 'Benevolent'?",
                options: ["Cruel", "Kind", "Selfish", "Stingy"],
                correct: 1,
                explanation: "Benevolent means well-meaning and kindly, which is synonymous with 'kind'."
            },
            {
                question: "Which word is stressed on the first syllable?",
                options: ["about", "before", "present", "receive"],
                correct: 2,
                explanation: "'Present' (noun) is stressed on the first syllable: PRE-sent."
            },
            {
                question: "Choose the correct idiomatic expression: He's _____ thin air.",
                options: ["vanishing into", "disappearing in", "evaporating to", "melting into"],
                correct: 0,
                explanation: "The correct idiom is 'vanishing into thin air' meaning to disappear completely."
            }
        ],
        math: [
            {
                question: "Solve for x: 2x + 5 = 15",
                options: ["5", "10", "7.5", "20"],
                correct: 0,
                explanation: "2x + 5 = 15 → 2x = 15 - 5 → 2x = 10 → x = 5"
            },
            {
                question: "What is the value of π (pi) to two decimal places?",
                options: ["3.14", "3.16", "3.12", "3.18"],
                correct: 0,
                explanation: "π is approximately 3.14159, which rounds to 3.14 to two decimal places."
            },
            {
                question: "Calculate the area of a triangle with base 6cm and height 8cm",
                options: ["24 cm²", "48 cm²", "14 cm²", "32 cm²"],
                correct: 0,
                explanation: "Area = ½ × base × height = ½ × 6 × 8 = 24 cm²"
            },
            {
                question: "Simplify: (x²)(x³)",
                options: ["x⁵", "x⁶", "x", "2x⁵"],
                correct: 0,
                explanation: "When multiplying with same base, add exponents: x² × x³ = x^(2+3) = x⁵"
            },
            {
                question: "What is 25% of 200?",
                options: ["50", "25", "75", "100"],
                correct: 0,
                explanation: "25% of 200 = 0.25 × 200 = 50"
            }
        ],
        physics: [
            {
                question: "What is the SI unit of force?",
                options: ["Joule", "Newton", "Watt", "Pascal"],
                correct: 1,
                explanation: "The SI unit of force is the Newton (N), named after Sir Isaac Newton."
            },
            {
                question: "Which law states that every action has an equal and opposite reaction?",
                options: ["Newton's First Law", "Newton's Second Law", "Newton's Third Law", "Ohm's Law"],
                correct: 2,
                explanation: "Newton's Third Law of Motion states this principle."
            },
            {
                question: "What is the speed of light in vacuum?",
                options: ["300,000 km/s", "150,000 km/s", "450,000 km/s", "600,000 km/s"],
                correct: 0,
                explanation: "The speed of light in vacuum is approximately 300,000 kilometers per second."
            },
            {
                question: "Which instrument measures electric current?",
                options: ["Voltmeter", "Ammeter", "Ohmmeter", "Galvanometer"],
                correct: 1,
                explanation: "An ammeter measures electric current in amperes."
            },
            {
                question: "What type of energy is stored in a stretched spring?",
                options: ["Kinetic energy", "Potential energy", "Thermal energy", "Electrical energy"],
                correct: 1,
                explanation: "A stretched spring stores elastic potential energy."
            }
        ],
        biology: [
            {
                question: "Which organelle is known as the powerhouse of the cell?",
                options: ["Nucleus", "Mitochondria", "Ribosome", "Golgi apparatus"],
                correct: 1,
                explanation: "Mitochondria produce ATP, the energy currency of the cell."
            },
            {
                question: "What is the process by which plants make their food?",
                options: ["Respiration", "Photosynthesis", "Transpiration", "Digestion"],
                correct: 1,
                explanation: "Photosynthesis converts light energy into chemical energy in plants."
            },
            {
                question: "Which blood type is the universal donor?",
                options: ["Type A", "Type B", "Type AB", "Type O"],
                correct: 3,
                explanation: "Type O negative is the universal donor as it can be given to all blood types."
            },
            {
                question: "What is the largest organ in the human body?",
                options: ["Liver", "Brain", "Skin", "Lungs"],
                correct: 2,
                explanation: "The skin is the largest organ, covering the entire body."
            },
            {
                question: "Which part of the brain controls balance and coordination?",
                options: ["Cerebrum", "Cerebellum", "Medulla", "Hypothalamus"],
                correct: 1,
                explanation: "The cerebellum is responsible for balance and coordination."
            }
        ],
        chemistry: [
            {
                question: "What is the chemical symbol for Gold?",
                options: ["Go", "Gd", "Au", "Ag"],
                correct: 2,
                explanation: "Au comes from the Latin word 'aurum' meaning gold."
            },
            {
                question: "What is the pH of pure water?",
                options: ["0", "7", "14", "10"],
                correct: 1,
                explanation: "Pure water is neutral with a pH of 7 at 25°C."
            },
            {
                question: "Which gas is most abundant in Earth's atmosphere?",
                options: ["Oxygen", "Carbon dioxide", "Nitrogen", "Argon"],
                correct: 2,
                explanation: "Nitrogen makes up about 78% of Earth's atmosphere."
            },
            {
                question: "What is the process of a solid turning directly into gas?",
                options: ["Evaporation", "Condensation", "Sublimation", "Deposition"],
                correct: 2,
                explanation: "Sublimation is the phase transition from solid to gas without passing through liquid."
            },
            {
                question: "Which element has the atomic number 1?",
                options: ["Helium", "Hydrogen", "Oxygen", "Carbon"],
                correct: 1,
                explanation: "Hydrogen is the first element with atomic number 1."
            }
        ],
        government: [
            {
                question: "Who is the current President of Nigeria?",
                options: ["Muhammadu Buhari", "Bola Tinubu", "Goodluck Jonathan", "Olusegun Obasanjo"],
                correct: 1,
                explanation: "Bola Ahmed Tinubu is the current President of Nigeria (as of 2024)."
            },
            {
                question: "Which arm of government makes laws?",
                options: ["Executive", "Legislature", "Judiciary", "Military"],
                correct: 1,
                explanation: "The Legislature (National Assembly) is responsible for making laws."
            },
            {
                question: "What year did Nigeria gain independence?",
                options: ["1957", "1960", "1963", "1970"],
                correct: 1,
                explanation: "Nigeria gained independence from Britain on October 1, 1960."
            },
            {
                question: "How many states are in Nigeria?",
                options: ["30", "36", "37", "38"],
                correct: 2,
                explanation: "Nigeria has 36 states and the Federal Capital Territory (FCT)."
            },
            {
                question: "Which document is the supreme law of Nigeria?",
                options: ["National Policy", "Constitution", "Manifesto", "Charter"],
                correct: 1,
                explanation: "The Constitution is the supreme law of Nigeria."
            }
        ],
        economics: [
            {
                question: "What does GDP stand for?",
                options: ["Gross Domestic Product", "General Domestic Price", "Gross Demand Product", "Government Domestic Policy"],
                correct: 0,
                explanation: "GDP stands for Gross Domestic Product, the total value of goods and services produced."
            },
            {
                question: "What is inflation?",
                options: ["Increase in production", "Decrease in prices", "Increase in prices", "Decrease in unemployment"],
                correct: 2,
                explanation: "Inflation is the rate at which prices for goods and services rise."
            },
            {
                question: "Which is NOT a factor of production?",
                options: ["Land", "Labor", "Money", "Entrepreneurship"],
                correct: 2,
                explanation: "The four factors of production are land, labor, capital, and entrepreneurship."
            },
            {
                question: "What is the primary function of a central bank?",
                options: ["Print money", "Control monetary policy", "Give personal loans", "Sell insurance"],
                correct: 1,
                explanation: "Central banks control monetary policy and regulate commercial banks."
            },
            {
                question: "What does 'ceteris paribus' mean?",
                options: ["Other things equal", "Let the buyer beware", "After this, therefore because of this", "For the public good"],
                correct: 0,
                explanation: "Ceteris paribus is Latin for 'other things being equal' or 'all else constant'."
            }
        ],
        literature: [
            {
                question: "Who wrote 'Things Fall Apart'?",
                options: ["Wole Soyinka", "Chinua Achebe", "Ben Okri", "Chimamanda Adichie"],
                correct: 1,
                explanation: "'Things Fall Apart' was written by Chinua Achebe, published in 1958."
            },
            {
                question: "What is a sonnet?",
                options: ["A 14-line poem", "A type of novel", "A drama", "A short story"],
                correct: 0,
                explanation: "A sonnet is a 14-line poem with a specific rhyme scheme."
            },
            {
                question: "Which literary device compares two things using 'like' or 'as'?",
                options: ["Metaphor", "Simile", "Personification", "Hyperbole"],
                correct: 1,
                explanation: "A simile directly compares two things using 'like' or 'as'."
            },
            {
                question: "Who is the author of 'The Lion and the Jewel'?",
                options: ["Wole Soyinka", "Chinua Achebe", "John Pepper Clark", "Femi Osofisan"],
                correct: 0,
                explanation: "'The Lion and the Jewel' is a play by Wole Soyinka."
            },
            {
                question: "What is the term for the main character in a story?",
                options: ["Antagonist", "Protagonist", "Narrator", "Foil"],
                correct: 1,
                explanation: "The protagonist is the main character around whom the story revolves."
            }
        ]
    };

    // =================== COMPLETE APP STATE ===================
    const APP_STATE = {
        currentUser: {
            name: 'Student',
            email: 'student@example.com',
            plan: 'free',
            subscriptionDate: null,
            expiryDate: null,
            questionsAttempted: 0,
            totalScore: 0,
            sessionTime: 0,
            mockExamsTaken: 0,
            paymentHistory: []
        },
        currentQuiz: {
            subject: '',
            questions: [],
            currentQuestionIndex: 0,
            score: 0,
            startTime: null,
            selectedAnswers: [],
            isMockExam: false,
            timer: null,
            timeRemaining: 7200 // 2 hours in seconds for mock exam
        },
        selectedPlan: 'pro',
        selectedPaymentMethod: 'card',
        premiumFeatures: {
            english: true,
            physics: true,
            chemistry: true,
            economics: true,
            unlimitedMockExams: false,
            studyGroups: false,
            videoSolutions: false,
            aiTutor: false
        }
    };

    // =================== CORE QUIZ FUNCTIONS ===================
    function generateQuestions(subject, count = 5) {
        const allQuestions = QUESTION_DATABASE[subject] || [];
        // For demo, return all questions (max 5)
        return allQuestions.slice(0, Math.min(count, allQuestions.length));
    }

    function startPractice(subject) {
        APP_STATE.currentQuiz = {
            subject: subject,
            questions: generateQuestions(subject, 5),
            currentQuestionIndex: 0,
            score: 0,
            startTime: new Date(),
            selectedAnswers: [],
            isMockExam: false
        };
        
        // Update UI
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        document.getElementById('back-to-dashboard').style.display = 'flex';
        
        // Load first question
        loadQuestion();
    }

    function checkPremiumAccess(subject) {
        const isPremiumSubject = ['english', 'physics', 'chemistry', 'economics'].includes(subject);
        
        if (isPremiumSubject && APP_STATE.currentUser.plan === 'free') {
            showNotification('warning', 'This subject requires Premium access. Upgrade to unlock all premium subjects.');
            openTab('premium-tab');
            return;
        }
        
        startPractice(subject);
    }

    function startMockExam() {
        if (APP_STATE.currentUser.plan === 'free' && APP_STATE.currentUser.mockExamsTaken >= 2) {
            showNotification('error', 'Free users limited to 2 mock exams per month. Upgrade to unlock unlimited mock exams.');
            openTab('premium-tab');
            return;
        }
        
        if (APP_STATE.currentUser.plan === 'basic' && APP_STATE.currentUser.mockExamsTaken >= 5) {
            showNotification('error', 'Basic plan limited to 5 mock exams per month. Upgrade to Pro for unlimited.');
            openTab('premium-tab');
            return;
        }
        
        // Collect mock exam settings
        const duration = parseInt(document.querySelector('input[name="duration"]:checked').value) * 60;
        const questionCount = parseInt(document.querySelector('input[name="questions"]:checked').value);
        
        // Generate questions from multiple subjects
        let allQuestions = [];
        const selectedSubjects = Array.from(document.querySelectorAll('input[name="subjects"]:checked')).map(cb => cb.value);
        
        selectedSubjects.forEach(subject => {
            if (QUESTION_DATABASE[subject]) {
                allQuestions = allQuestions.concat(generateQuestions(subject, 10));
            }
        });
        
        // Shuffle and limit questions
        allQuestions = shuffleArray(allQuestions).slice(0, Math.min(questionCount, allQuestions.length));
        
        if (allQuestions.length === 0) {
            showNotification('error', 'Please select at least one subject for the mock exam.');
            return;
        }
        
        APP_STATE.currentUser.mockExamsTaken++;
        APP_STATE.currentQuiz = {
            subject: 'Mock Exam',
            questions: allQuestions,
            currentQuestionIndex: 0,
            score: 0,
            startTime: new Date(),
            selectedAnswers: [],
            isMockExam: true,
            timer: null,
            timeRemaining: duration
        };
        
        // Update UI
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        document.getElementById('back-to-dashboard').style.display = 'flex';
        
        // Start timer
        startMockTimer();
        
        // Load first question
        loadQuestion();
    }

    function loadQuestion() {
        const quiz = APP_STATE.currentQuiz;
        const question = quiz.questions[quiz.currentQuestionIndex];
        
        if (!question) {
            showResults();
            return;
        }
        
        // Update progress
        const progress = ((quiz.currentQuestionIndex + 1) / quiz.questions.length) * 100;
        
        // Build question HTML
        let html = `
            <div class="quiz-header">
                <div>
                    <div class="subject-title">${quiz.isMockExam ? 'Mock Exam' : quiz.subject.toUpperCase()}</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                </div>
                ${quiz.isMockExam ? `<div class="mock-timer" id="mock-timer">${formatTime(quiz.timeRemaining * 1000)}</div>` : ''}
            </div>
            
            <div class="question-meta">
                <span><i class="fas fa-question-circle"></i> Question ${quiz.currentQuestionIndex + 1} of ${quiz.questions.length}</span>
                <span><i class="fas fa-star"></i> Score: ${quiz.score}</span>
                ${!quiz.isMockExam ? `<span><i class="fas fa-clock"></i> Time: ${formatTime(new Date() - quiz.startTime)}</span>` : ''}
            </div>
            
            <div class="question-box">
                ${question.question}
            </div>
            
            <div class="options-container">
        `;
        
        const optionLetters = ['A', 'B', 'C', 'D'];
        question.options.forEach((option, index) => {
            const isSelected = quiz.selectedAnswers[quiz.currentQuestionIndex] === index;
            html += `
                <div class="option ${isSelected ? 'selected' : ''}" onclick="selectOption(${index})">
                    <span class="option-letter">${optionLetters[index]}</span>
                    ${option}
                </div>
            `;
        });
        
        html += `
            </div>
            
            <div class="button-container">
                <button class="btn btn-primary" onclick="previousQuestion()" ${quiz.currentQuestionIndex === 0 ? 'disabled' : ''}>
                    <i class="fas fa-arrow-left"></i> Previous
                </button>
                
                <button class="btn btn-secondary" onclick="submitAnswer()">
                    ${quiz.currentQuestionIndex === quiz.questions.length - 1 ? 'Finish Exam' : 'Next Question'}
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        `;
        
        document.getElementById('quiz-section').innerHTML = html;
    }

    function selectOption(optionIndex) {
        const quiz = APP_STATE.currentQuiz;
        quiz.selectedAnswers[quiz.currentQuestionIndex] = optionIndex;
        
        // Update UI
        document.querySelectorAll('.option').forEach((opt, idx) => {
            opt.classList.remove('selected');
            if (idx === optionIndex) {
                opt.classList.add('selected');
            }
        });
    }

    function submitAnswer() {
        const quiz = APP_STATE.currentQuiz;
        const currentQuestion = quiz.questions[quiz.currentQuestionIndex];
        const selectedAnswer = quiz.selectedAnswers[quiz.currentQuestionIndex];
        
        // Check if answer is selected
        if (selectedAnswer === undefined) {
            showNotification('warning', 'Please select an answer before proceeding.');
            return;
        }
        
        // Check if answer is correct
        if (selectedAnswer === currentQuestion.correct) {
            quiz.score++;
            showNotification('success', 'Correct answer!');
        } else {
            showNotification('error', `Incorrect. The correct answer is: ${currentQuestion.options[currentQuestion.correct]}`);
        }
        
        // Move to next question
        if (quiz.currentQuestionIndex < quiz.questions.length - 1) {
            quiz.currentQuestionIndex++;
            loadQuestion();
        } else {
            showResults();
        }
        
        // Update user stats
        APP_STATE.currentUser.questionsAttempted++;
    }

    function previousQuestion() {
        if (APP_STATE.currentQuiz.currentQuestionIndex > 0) {
            APP_STATE.currentQuiz.currentQuestionIndex--;
            loadQuestion();
        }
    }

    function showResults() {
        const quiz = APP_STATE.currentQuiz;
        const totalQuestions = quiz.questions.length;
        const percentage = (quiz.score / totalQuestions) * 100;
        
        // Calculate time taken
        const timeTaken = new Date() - quiz.startTime;
        
        // Stop timer if mock exam
        if (quiz.isMockExam && quiz.timer) {
            clearInterval(quiz.timer);
        }
        
        // Update user stats
        APP_STATE.currentUser.totalScore = ((APP_STATE.currentUser.totalScore * (APP_STATE.currentUser.questionsAttempted - totalQuestions)) + quiz.score * 100) / APP_STATE.currentUser.questionsAttempted;
        
        // Build results HTML
        let html = `
            <div class="result-header">
                <div class="result-icon">
                    ${percentage >= 70 ? '<i class="fas fa-trophy"></i>' : 
                      percentage >= 50 ? '<i class="fas fa-medal"></i>' : 
                      '<i class="fas fa-award"></i>'}
                </div>
                <h2>${quiz.isMockExam ? 'Mock Exam' : quiz.subject} Results</h2>
                <div class="score-display">${quiz.score}/${totalQuestions}</div>
                <div style="font-size: 1.5rem; color: ${percentage >= 70 ? 'var(--success)' : percentage >= 50 ? 'var(--warning)' : 'var(--danger)'}">
                    ${percentage.toFixed(1)}%
                </div>
                <p>Time taken: ${formatTime(timeTaken)}</p>
            </div>
            
            <div class="result-details">
                <div class="result-box">
                    <h3>Correct Answers</h3>
                    <p style="color: var(--success);">${quiz.score}</p>
                </div>
                <div class="result-box">
                    <h3>Wrong Answers</h3>
                    <p style="color: var(--danger);">${totalQuestions - quiz.score}</p>
                </div>
                <div class="result-box">
                    <h3>Percentage</h3>
                    <p>${percentage.toFixed(1)}%</p>
                </div>
                <div class="result-box">
                    <h3>Time Per Question</h3>
                    <p>${formatTime(timeTaken / totalQuestions)}</p>
                </div>
            </div>
            
            <div class="score-breakdown">
                <h3>Question Review</h3>
        `;
        
        quiz.questions.forEach((q, index) => {
            const userAnswer = quiz.selectedAnswers[index];
            const isCorrect = userAnswer === q.correct;
            const optionLetters = ['A', 'B', 'C', 'D'];
            
            html += `
                <div class="subject-score">
                    <div>
                        <strong>Q${index + 1}:</strong> ${q.question.substring(0, 50)}...
                        <div style="font-size: 0.9rem; margin-top: 5px;">
                            <span style="color: ${isCorrect ? 'var(--success)' : 'var(--danger)'}">
                                Your answer: ${userAnswer !== undefined ? optionLetters[userAnswer] : 'Not answered'}
                            </span>
                            <span style="color: var(--success); margin-left: 10px;">
                                Correct: ${optionLetters[q.correct]}
                            </span>
                        </div>
                        ${!isCorrect ? `<div style="font-size: 0.8rem; color: #666; margin-top: 5px;">${q.explanation}</div>` : ''}
                    </div>
                    <div>
                        ${isCorrect ? '<i class="fas fa-check-circle" style="color: var(--success); font-size: 1.5rem;"></i>' : 
                          '<i class="fas fa-times-circle" style="color: var(--danger); font-size: 1.5rem;"></i>'}
                    </div>
                </div>
            `;
        });
        
        html += `
            </div>
            
            <div style="text-align: center; margin-top: 40px;">
                <button class="btn btn-primary" onclick="returnToDashboard()" style="margin-right: 10px;">
                    <i class="fas fa-home"></i> Return to Dashboard
                </button>
                ${quiz.isMockExam ? '' : `
                    <button class="btn btn-secondary" onclick="retryQuiz()">
                        <i class="fas fa-redo"></i> Try Again
                    </button>
                `}
                <button class="btn btn-purple" onclick="shareResults()" style="margin-left: 10px;">
                    <i class="fas fa-share"></i> Share Results
                </button>
            </div>
        `;
        
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('results-section').style.display = 'block';
        document.getElementById('results-section').innerHTML = html;
    }

    // =================== TIMER FUNCTIONS ===================
    function startMockTimer() {
        const quiz = APP_STATE.currentQuiz;
        
        function updateTimer() {
            if (quiz.timeRemaining <= 0) {
                clearInterval(quiz.timer);
                showNotification('warning', 'Time is up! Submitting your exam...');
                setTimeout(showResults, 1000);
                return;
            }
            
            const hours = Math.floor(quiz.timeRemaining / 3600);
            const minutes = Math.floor((quiz.timeRemaining % 3600) / 60);
            const seconds = quiz.timeRemaining % 60;
            
            if (document.getElementById('mock-timer')) {
                document.getElementById('mock-timer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            quiz.timeRemaining--;
        }
        
        quiz.timer = setInterval(updateTimer, 1000);
        updateTimer();
    }

    function formatTime(ms) {
        const seconds = Math.floor(ms / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        
        if (hours > 0) {
            return `${hours}h ${minutes % 60}m`;
        } else if (minutes > 0) {
            return `${minutes}m ${seconds % 60}s`;
        } else {
            return `${seconds}s`;
        }
    }

    // =================== HELPER FUNCTIONS ===================
    function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    }

    function showNotification(type, message) {
        const colors = {
            success: '#28a745',
            error: '#dc3545',
            warning: '#ffc107',
            info: '#17a2b8'
        };
        
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.style.background = colors[type] || colors.info;
        notification.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : 
                              type === 'error' ? 'exclamation-circle' : 
                              type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
            ${message}
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.animation = 'slideOutRight 0.3s ease';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }

    // =================== UI FUNCTIONS ===================
    function openTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.style.display = 'none';
        });
        
        // Remove active class from all tab buttons
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Show selected tab content
        document.getElementById(tabName).style.display = 'block';
        
        // Add active class to clicked tab button
        document.querySelectorAll('.tab-btn').forEach(btn => {
            if (btn.getAttribute('onclick')?.includes(tabName)) {
                btn.classList.add('active');
            }
        });
    }

    function returnToDashboard() {
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('results-section').style.display = 'none';
        document.getElementById('dashboard').style.display = 'block';
        document.getElementById('back-to-dashboard').style.display = 'none';
        
        // Stop any running timers
        if (APP_STATE.currentQuiz.timer) {
            clearInterval(APP_STATE.currentQuiz.timer);
        }
    }

    function retryQuiz() {
        APP_STATE.currentQuiz.currentQuestionIndex = 0;
        APP_STATE.currentQuiz.score = 0;
        APP_STATE.currentQuiz.startTime = new Date();
        APP_STATE.currentQuiz.selectedAnswers = [];
        
        document.getElementById('results-section').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        
        loadQuestion();
    }

    function shareResults() {
        const quiz = APP_STATE.currentQuiz;
        const percentage = (quiz.score / quiz.questions.length) * 100;
        const message = `I scored ${quiz.score}/${quiz.questions.length} (${percentage.toFixed(1)}%) on the ${quiz.subject} quiz in JAMB Mastermind 300!`;
        
        if (navigator.share) {
            navigator.share({
                title: 'My JAMB Mastermind Results',
                text: message,
                url: window.location.href
            });
        } else {
            navigator.clipboard.writeText(message);
            showNotification('success', 'Results copied to clipboard!');
        }
    }

    function quickDemo() {
        // Start a quick demo with all subjects
        const demoQuestions = [];
        Object.keys(QUESTION_DATABASE).forEach(subject => {
            demoQuestions.push(...generateQuestions(subject, 1));
        });
        
        // Shuffle and take 3 questions
        const shuffled = shuffleArray(demoQuestions).slice(0, 3);
        
        APP_STATE.currentQuiz = {
            subject: 'Quick Demo',
            questions: shuffled,
            currentQuestionIndex: 0,
            score: 0,
            startTime: new Date(),
            selectedAnswers: [],
            isMockExam: false
        };
        
        document.getElementById('dashboard').style.display = 'none';
        document.getElementById('quiz-section').style.display = 'block';
        document.getElementById('back-to-dashboard').style.display = 'flex';
        
        loadQuestion();
    }

    function enableTestMode() {
        // Unlock all premium features for testing
        APP_STATE.currentUser.plan = 'pro';
        APP_STATE.currentUser.mockExamsTaken = 0;
        document.getElementById('user-plan').textContent = 'PRO Plan';
        document.getElementById('user-avatar').style.background = 'var(--premium)';
        document.getElementById('user-avatar').innerHTML = '<i class="fas fa-crown"></i>';
        
        showNotification('success', '🎮 Test Mode Activated! All features unlocked for testing.');
        
        // Hide test button
        document.getElementById('dev-test-btn').style.display = 'none';
    }

    // =================== MOCK EXAM FUNCTIONS ===================
    function copyInviteCode() {
        const inviteCode = document.getElementById('invite-code');
        inviteCode.select();
        document.execCommand('copy');
        showNotification('success', 'Invite code copied to clipboard!');
    }

    function joinMockSession() {
        showNotification('info', 'Enter a friend\'s code in the field below to join their mock exam session.');
    }

    function inviteFriend() {
        const friendCode = document.getElementById('friend-code').value;
        if (!friendCode) {
            showNotification('error', 'Please enter a friend\'s code');
            return;
        }
        showNotification('success', `Invitation sent to ${friendCode}!`);
    }

    function addPlayer(name, isReady) {
        const playerList = document.getElementById('player-list');
        const playerCard = document.createElement('div');
        playerCard.className = 'player-card';
        playerCard.innerHTML = `
            <i class="fas fa-user-circle fa-2x"></i>
            <p>${name}</p>
            <small>${isReady ? 'Ready' : 'Waiting'}</small>
        `;
        playerList.appendChild(playerCard);
    }

    // =================== PAYMENT FUNCTIONS ===================
    function upgradeToPremium() {
        openTab('premium-tab');
        showNotification('info', 'Choose your premium plan and unlock all features!');
    }

    function selectPlan(plan) {
        APP_STATE.selectedPlan = plan;
        
        // Update UI
        document.querySelectorAll('.plan-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        document.querySelectorAll('.plan-card').forEach(card => {
            if (card.getAttribute('onclick')?.includes(plan)) {
                card.classList.add('selected');
            }
        });
        
        // Show payment modal
        showPaymentModal();
    }

    function showPaymentModal() {
        const modal = document.getElementById('payment-modal');
        modal.style.display = 'flex';
        
        // Update payment summary
        const planNames = {
            basic: 'Basic Plan',
            pro: 'Pro Plan',
            ultimate: 'Ultimate Plan'
        };
        
        const planPrices = {
            basic: '₦2,500',
            pro: '₦5,000',
            ultimate: '₦12,000'
        };
        
        const planDurations = {
            basic: 'per month',
            pro: 'per month',
            ultimate: 'for 3 months'
        };
        
        const planDesc = {
            basic: 'Monthly Access',
            pro: 'Monthly Access',
            ultimate: '3 Months Access'
        };
        
        document.getElementById('selected-plan-name').textContent = planNames[APP_STATE.selectedPlan];
        document.getElementById('selected-plan-price').textContent = planPrices[APP_STATE.selectedPlan];
        document.getElementById('selected-plan-duration').textContent = planDurations[APP_STATE.selectedPlan];
        document.getElementById('selected-plan-desc').textContent = planDesc[APP_STATE.selectedPlan];
        
        // Generate payment reference
        document.getElementById('payment-reference').textContent = `JAMB-${Date.now()}`;
    }

    function closePaymentModal() {
        document.getElementById('payment-modal').style.display = 'none';
    }

    function selectPaymentMethod(method) {
        APP_STATE.selectedPaymentMethod = method;
        
        // Update UI
        document.querySelectorAll('.payment-method').forEach(el => {
            el.classList.remove('selected');
        });
        
        document.querySelectorAll('.payment-method').forEach(el => {
            if (el.getAttribute('onclick')?.includes(method)) {
                el.classList.add('selected');
            }
        });
        
        // Show appropriate form
        document.getElementById('card-payment-form').style.display = method === 'card' ? 'block' : 'none';
        document.getElementById('transfer-payment-form').style.display = method === 'transfer' ? 'block' : 'none';
    }

    function processPayment() {
        const modal = document.getElementById('payment-modal');
        const loadingHTML = `
            <div style="text-align: center; padding: 40px;">
                <div class="spinner" style="width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                <h3>Processing Payment...</h3>
                <p>Please wait while we secure your transaction</p>
            </div>
        `;
        
        modal.querySelector('.payment-content').innerHTML = loadingHTML;
        
        // Simulate payment processing
        setTimeout(() => {
            // Simulate successful payment
            const successHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="width: 80px; height: 80px; background: var(--success); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 2rem;">
                        <i class="fas fa-check"></i>
                    </div>
                    <h3>Payment Successful!</h3>
                    <p>Your premium subscription has been activated</p>
                    <div style="background: #f0fff5; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Plan:</strong> ${APP_STATE.selectedPlan.toUpperCase()} Plan</p>
                        <p><strong>Expires:</strong> ${new Date(Date.now() + 30*24*60*60*1000).toLocaleDateString()}</p>
                        <p><strong>Transaction ID:</strong> TXN-${Date.now()}</p>
                    </div>
                    <button class="btn btn-success" onclick="activatePremium()" style="width: 100%; padding: 15px;">
                        <i class="fas fa-rocket"></i> Start Learning Now
                    </button>
                </div>
            `;
            
            modal.querySelector('.payment-content').innerHTML = successHTML;
            
            // Add to payment history
            APP_STATE.currentUser.paymentHistory.push({
                date: new Date().toISOString(),
                plan: APP_STATE.selectedPlan,
                amount: APP_STATE.selectedPlan === 'basic' ? 2500 : APP_STATE.selectedPlan === 'pro' ? 5000 : 12000,
                transactionId: `TXN-${Date.now()}`,
                status: 'completed'
            });
            
        }, 3000);
    }

    function activatePremium() {
        APP_STATE.currentUser.plan = APP_STATE.selectedPlan;
        APP_STATE.currentUser.subscriptionDate = new Date().toISOString();
        APP_STATE.currentUser.expiryDate = new Date(Date.now() + 30*24*60*60*1000).toISOString();
        
        // Activate premium features based on plan
        if (APP_STATE.selectedPlan === 'basic') {
            APP_STATE.premiumFeatures.unlimitedMockExams = true;
        } else if (APP_STATE.selectedPlan === 'pro') {
            APP_STATE.premiumFeatures.unlimitedMockExams = true;
            APP_STATE.premiumFeatures.studyGroups = true;
            APP_STATE.premiumFeatures.videoSolutions = true;
            APP_STATE.premiumFeatures.aiTutor = true;
        } else if (APP_STATE.selectedPlan === 'ultimate') {
            APP_STATE.premiumFeatures.unlimitedMockExams = true;
            APP_STATE.premiumFeatures.studyGroups = true;
            APP_STATE.premiumFeatures.videoSolutions = true;
            APP_STATE.premiumFeatures.aiTutor = true;
        }
        
        // Update UI
        document.getElementById('user-plan').textContent = `${APP_STATE.selectedPlan.toUpperCase()} Plan`;
        document.getElementById('user-avatar').style.background = 'var(--premium)';
        document.getElementById('user-avatar').innerHTML = '<i class="fas fa-crown"></i>';
        
        closePaymentModal();
        openTab('practice-tab');
        
        showNotification('success', `🎉 Premium ${APP_STATE.selectedPlan.toUpperCase()} Plan Activated! All features unlocked.`);
        
        // Update mock exam limits
        updateMockExamLimits();
    }

    function updateMockExamLimits() {
        const mockLimit = APP_STATE.currentUser.plan === 'free' ? 2 : 
                         APP_STATE.currentUser.plan === 'basic' ? 5 : 
                         APP_STATE.currentUser.plan === 'pro' ? 'Unlimited' : 
                         'Unlimited';
        
        // Update UI to show limits
        const mockTab = document.querySelector('#mock-tab');
        const warning = mockTab.querySelector('.mock-setup .fa-exclamation-circle')?.parentElement;
        if (warning) {
            warning.innerHTML = `
                <i class="fas fa-exclamation-circle"></i> 
                <strong>Premium Feature:</strong> 
                ${APP_STATE.currentUser.plan === 'free' ? 
                    `Free users limited to ${mockLimit} mock exams per month.` : 
                    `You have ${mockLimit} mock exams available.`}
                ${APP_STATE.currentUser.plan === 'free' ? 
                    `<button class="btn btn-premium" onclick="upgradeToPremium()" style="margin-left: 10px; padding: 5px 15px; font-size: 0.9rem;">
                        <i class="fas fa-unlock"></i> Unlock Unlimited
                    </button>` : ''}
            `;
        }
    }

    // =================== USER PROFILE FUNCTIONS ===================
    function toggleUserDropdown() {
        const dropdown = document.getElementById('user-dropdown');
        dropdown.classList.toggle('show');
    }

    function viewProfile() {
        const profileHTML = `
            <div style="padding: 30px;">
                <h3><i class="fas fa-user-circle"></i> User Profile</h3>
                <div style="background: #f9f9f9; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <p><strong>Name:</strong> ${APP_STATE.currentUser.name}</p>
                    <p><strong>Email:</strong> ${APP_STATE.currentUser.email}</p>
                    <p><strong>Plan:</strong> <span class="premium-badge">${APP_STATE.currentUser.plan.toUpperCase()}</span></p>
                    <p><strong>Member Since:</strong> ${new Date().toLocaleDateString()}</p>
                    <p><strong>Questions Attempted:</strong> ${APP_STATE.currentUser.questionsAttempted}</p>
                    <p><strong>Average Score:</strong> ${APP_STATE.currentUser.totalScore.toFixed(1)}%</p>
                </div>
                <button onclick="window.close()" class="btn btn-primary">Close</button>
            </div>
        `;
        
        const profileWindow = window.open('', 'Profile', 'width=400,height=500');
        if (profileWindow) {
            profileWindow.document.write(profileHTML);
        }
        
        toggleUserDropdown();
    }

    function viewSubscription() {
        const subscriptionHTML = `
            <div style="padding: 30px;">
                <h3><i class="fas fa-crown"></i> Subscription Status</h3>
                <div style="background: ${APP_STATE.currentUser.plan === 'free' ? '#f8f9fa' : '#f0fff5'}; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h4>Current Plan: ${APP_STATE.currentUser.plan.toUpperCase()}</h4>
                    ${APP_STATE.currentUser.plan !== 'free' ? 
                        `<p><strong>Active Until:</strong> ${APP_STATE.currentUser.expiryDate ? new Date(APP_STATE.currentUser.expiryDate).toLocaleDateString() : 'N/A'}</p>
                         <p><strong>Features:</strong> ${getPlanFeatures(APP_STATE.currentUser.plan)}</p>` :
                        `<p>You are currently on the Free plan. Upgrade to unlock premium features.</p>`
                    }
                </div>
                ${APP_STATE.currentUser.plan === 'free' ? 
                    `<button onclick="upgradeToPremium()" class="btn btn-premium">Upgrade Now</button>` :
                    `<button onclick="renewSubscription()" class="btn btn-primary">Renew Subscription</button>`
                }
                <button onclick="window.close()" class="btn btn-secondary" style="margin-left: 10px;">Close</button>
            </div>
        `;
        
        const subscriptionWindow = window.open('', 'Subscription', 'width=400,height=500');
        if (subscriptionWindow) {
            subscriptionWindow.document.write(subscriptionHTML);
        }
        
        toggleUserDropdown();
    }

    function viewPurchaseHistory() {
        const historyHTML = `
            <div style="padding: 30px;">
                <h3><i class="fas fa-history"></i> Purchase History</h3>
                ${APP_STATE.currentUser.paymentHistory.length === 0 ? 
                    '<p>No purchase history found.</p>' :
                    APP_STATE.currentUser.paymentHistory.map(payment => `
                        <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <p><strong>Date:</strong> ${new Date(payment.date).toLocaleDateString()}</p>
                            <p><strong>Plan:</strong> ${payment.plan.toUpperCase()}</p>
                            <p><strong>Amount:</strong> ₦${payment.amount}</p>
                            <p><strong>Status:</strong> <span style="color: green;">${payment.status}</span></p>
                            <p><strong>Transaction ID:</strong> ${payment.transactionId}</p>
                        </div>
                    `).join('')
                }
                <button onclick="window.close()" class="btn btn-primary">Close</button>
            </div>
        `;
        
        const historyWindow = window.open('', 'Purchase History', 'width=500,height=600');
        if (historyWindow) {
            historyWindow.document.write(historyHTML);
        }
        
        toggleUserDropdown();
    }

    function logout() {
        if (confirm("Are you sure you want to logout?")) {
            showNotification('info', 'Logged out successfully. Come back soon!');
            setTimeout(() => {
                location.reload();
            }, 1500);
        }
        toggleUserDropdown();
    }

    function getPlanFeatures(plan) {
        const features = {
            free: 'Limited subjects, 2 mock exams/month, basic analytics',
            basic: 'All subjects, 5 mock exams/month, basic analytics',
            pro: 'All subjects, unlimited mock exams, video solutions, AI tutor',
            ultimate: 'All Pro features + personal tutor + study schedule + certificate'
        };
        return features[plan] || features.free;
    }

    function showPaymentHistory() {
        viewPurchaseHistory();
    }

    function showAnalytics() {
        showNotification('info', 'Analytics feature coming soon!');
    }

    function createStudyGroup() {
        showNotification('info', 'Study Groups feature requires Premium subscription.');
    }

    function joinStudyGroup() {
        showNotification('info', 'Study Groups feature requires Premium subscription.');
    }

    function viewLeaderboard() {
        showNotification('info', 'Leaderboard feature coming soon!');
    }

    function renewSubscription() {
        showNotification('info', 'Renewal feature coming soon!');
    }

    // =================== INITIALIZATION ===================
    window.onload = function() {
        openTab('practice-tab');
        
        // Add sample multiplayer players
        setTimeout(() => {
            if (document.getElementById('player-list').children.length === 1) {
                addPlayer("Chidinma", true);
                addPlayer("Emeka", true);
            }
        }, 1000);
        
        // Start session timer
        setInterval(() => {
            APP_STATE.currentUser.sessionTime++;
            const hours = Math.floor(APP_STATE.currentUser.sessionTime / 3600);
            const minutes = Math.floor((APP_STATE.currentUser.sessionTime % 3600) / 60);
            document.getElementById('session-timer').innerHTML = 
                `<i class="far fa-clock"></i> Session: ${hours}h ${minutes}m`;
        }, 1000);
        
        // Show welcome notification
        setTimeout(() => {
            showNotification('info', '🎓 Welcome to JAMB Mastermind 300! Click any subject to start practicing.');
            
            if (APP_STATE.currentUser.plan === 'free') {
                setTimeout(() => {
                    showNotification('warning', '💎 Upgrade to Premium for full access to all subjects and unlimited mock exams!');
                }, 3000);
            }
        }, 1500);
        
        // Update mock exam limits display
        updateMockExamLimits();
    };
</script>
</body>
</html>
